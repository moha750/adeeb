-- =====================================================
-- إضافة سياسة UPDATE لتحديث مدة الزيارة
-- =====================================================
-- تاريخ الإنشاء: 2026-01-22
-- الوصف: السماح بتحديث مدة الزيارة وحالة الارتداد للزيارات
-- =====================================================

-- =====================================================
-- سياسة التحديث (UPDATE) - site_visits
-- =====================================================
-- السماح للجميع (anon و authenticated) بتحديث مدة الزيارة فقط
CREATE POLICY "allow_update_visit_duration"
    ON public.site_visits
    FOR UPDATE
    TO anon, authenticated
    USING (true)
    WITH CHECK (true);

-- =====================================================
-- تعليق على السياسة
-- =====================================================
COMMENT ON POLICY "allow_update_visit_duration" ON public.site_visits 
IS 'السماح بتحديث مدة الزيارة وحالة الارتداد للزيارات المسجلة';
