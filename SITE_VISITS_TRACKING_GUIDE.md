# ๐ ุฏููู ูุธุงู ุชุชุจุน ุฒูุงุฑุงุช ุงููููุน - ูุงุฏู ุฃุฏูุจ

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุชูุงูู ูุชุชุจุน ูุชุญููู ุฒูุงุฑุงุช ูููุน ูุงุฏู ุฃุฏูุจุ ูููุฑ ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ ุนู ุณููู ุงูุฒูุงุฑ ูุน ุงุญุชุฑุงู ูุงูู ููุฎุตูุตูุฉ.

---

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุชุชุจุน ุงูุชููุงุฆู
- โ ุชุณุฌูู ุชููุงุฆู ููุฒูุงุฑุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
- โ ุชุชุจุน ูุฏุฉ ุงูุฒูุงุฑุฉ ุจุฏูุฉ
- โ ูุนุฑูุงุช ูุฌูููุฉ ููุฒูุงุฑ (ูุง ุชุฎุฒูู ุจูุงูุงุช ุดุฎุตูุฉ)
- โ ููุน ุงูุชูุฑุงุฑ ุจุงุณุชุฎุฏุงู localStorage

### 2. ุงูุจูุงูุงุช ุงูููุฌูุนุฉ
- ๐ ุงูุตูุญุงุช ุงููุฒุงุฑุฉ ูุงูุนูุงููู
- ๐ฅ๏ธ ููุน ุงูุฌูุงุฒ (ุณุทุญ ููุชุจุ ุฌูุงูุ ุชุงุจูุช)
- ๐ ุงููุชุตูุญ ููุธุงู ุงูุชุดุบูู
- โฑ๏ธ ูุฏุฉ ุงูุฒูุงุฑุฉ ููุนุฏู ุงูุงุฑุชุฏุงุฏ
- ๐ฑ ุฏูุฉ ุงูุดุงุดุฉ
- ๐ ุงููุตุฏุฑ (Referrer)

### 3. ููุญุฉ ุงูุชุญูู
- ๐ ุจุทุงูุงุช ุฅุญุตุงุฆูุฉ (ุงููููุ ุงูุฃุณุจูุนุ ุงูุดูุฑ)
- ๐ ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ
- ๐ฅ ุฃูุซุฑ ุงูุตูุญุงุช ุฒูุงุฑุฉ
- ๐ฑ ุชูุฒูุน ุงูุฃุฌูุฒุฉ
- ๐ฅ ุชุตุฏูุฑ ุงูุจูุงูุงุช (CSV/JSON)

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู `site_visits`
ูุฎุฒู ุฌููุน ุจูุงูุงุช ุงูุฒูุงุฑุงุช ุจุดูู ุชูุตููู:

```sql
- id: ูุนุฑู ูุฑูุฏ ููุฒูุงุฑุฉ
- page_url: ุฑุงุจุท ุงูุตูุญุฉ ุงููุงูู
- page_title: ุนููุงู ุงูุตูุญุฉ
- page_path: ูุณุงุฑ ุงูุตูุญุฉ
- referrer: ุงููุตุฏุฑ
- visitor_id: ูุนุฑู ูุฌููู ููุฒุงุฆุฑ
- session_id: ูุนุฑู ุงูุฌูุณุฉ
- ip_address: ุนููุงู IP
- user_agent: ูุนูููุงุช ุงููุชุตูุญ
- browser_name: ุงุณู ุงููุชุตูุญ
- browser_version: ุฅุตุฏุงุฑ ุงููุชุตูุญ
- os_name: ูุธุงู ุงูุชุดุบูู
- os_version: ุฅุตุฏุงุฑ ุงููุธุงู
- device_type: ููุน ุงูุฌูุงุฒ
- visit_duration: ูุฏุฉ ุงูุฒูุงุฑุฉ ุจุงูุซูุงูู
- is_bounce: ูู ุบุงุฏุฑ ูุจุงุดุฑุฉ
- screen_width: ุนุฑุถ ุงูุดุงุดุฉ
- screen_height: ุงุฑุชูุงุน ุงูุดุงุดุฉ
- visited_at: ููุช ุงูุฒูุงุฑุฉ
```

#### ุฌุฏูู `site_visits_daily_stats`
ุฅุญุตุงุฆูุงุช ููููุฉ ููุฌูุนุฉ ูุชุญุณูู ุงูุฃุฏุงุก:

```sql
- visit_date: ุงูุชุงุฑูุฎ
- page_path: ูุณุงุฑ ุงูุตูุญุฉ
- total_visits: ุฅุฌูุงูู ุงูุฒูุงุฑุงุช
- unique_visitors: ุงูุฒูุงุฑ ุงููุฑูุฏูู
- desktop_visits: ุฒูุงุฑุงุช ุณุทุญ ุงูููุชุจ
- mobile_visits: ุฒูุงุฑุงุช ุงูุฌูุงู
- tablet_visits: ุฒูุงุฑุงุช ุงูุชุงุจูุช
- avg_duration: ูุชูุณุท ูุฏุฉ ุงูุฒูุงุฑุฉ
- bounce_rate: ูุนุฏู ุงูุงุฑุชุฏุงุฏ
```

### ุงูุฏูุงู ุงููุณุงุนุฏุฉ

#### `get_visit_stats(start_date, end_date)`
ุชูุฑุฌุน ุฅุญุตุงุฆูุงุช ุนุงูุฉ ูููุชุฑุฉ ุงููุญุฏุฏุฉ:
- ุฅุฌูุงูู ุงูุฒูุงุฑุงุช
- ุงูุฒูุงุฑ ุงููุฑูุฏูู
- ูุชูุณุท ูุฏุฉ ุงูุฒูุงุฑุฉ
- ูุนุฏู ุงูุงุฑุชุฏุงุฏ
- ูุณุจ ุชูุฒูุน ุงูุฃุฌูุฒุฉ

#### `get_top_pages(days_back, limit_count)`
ุชูุฑุฌุน ุฃูุซุฑ ุงูุตูุญุงุช ุฒูุงุฑุฉ:
- ูุณุงุฑ ุงูุตูุญุฉ
- ุนููุงู ุงูุตูุญุฉ
- ุนุฏุฏ ุงูุฒูุงุฑุงุช
- ุงูุฒูุงุฑ ุงููุฑูุฏูู

#### `get_visits_by_day(days_back)`
ุชูุฑุฌุน ุงูุฒูุงุฑุงุช ุงูููููุฉ ูููุชุฑุฉ ุงููุญุฏุฏุฉ:
- ุงูุชุงุฑูุฎ
- ุฅุฌูุงูู ุงูุฒูุงุฑุงุช
- ุงูุฒูุงุฑ ุงููุฑูุฏูู

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### ุณูุงุณุงุช RLS (Row Level Security)

#### ุงูุฅุฏุฑุงุฌ (INSERT)
- โ **ูุชุงุญ ููุฌููุน** (anon, authenticated)
- ูุณูุญ ูุฃู ุฒุงุฆุฑ ุจุชุณุฌูู ุฒูุงุฑุชู

#### ุงููุฑุงุกุฉ (SELECT)
- โ **ุงููุณุชูู 5 ูุฃุนูู**
- ุฑุฆูุณ ุงููุฌูุฉุ ูุงุฆุจ ุงูุฑุฆูุณุ ุงูุฃููู ุงูุนุงูุ ุงููุฌูุณ ุงูุฅุฏุงุฑูุ ุงููุฌูุณ ุงูุฃุนูู

#### ุงูุญุฐู (DELETE)
- โ **ุงููุณุชูู 8 ูุฃุนูู**
- ุงููุฌูุณ ุงูุฅุฏุงุฑู ูุงููุฌูุณ ุงูุฃุนูู ููุท

### ุงูุตูุงุญูุงุช ุงููุถุงูุฉ

1. **`view_site_visits`** - ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑุงุช
   - ุงููุณุชูู 5 ูุฃุนูู

2. **`manage_site_visits`** - ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุฒูุงุฑุงุช
   - ุงููุณุชูู 8 ูุฃุนูู

3. **`export_site_visits`** - ุชุตุฏูุฑ ุจูุงูุงุช ุงูุฒูุงุฑุงุช
   - ุงููุณุชูู 6 ูุฃุนูู

---

## ๐ ุงููููุงุช ุงููููุดุฃุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
```
supabase/migrations/
โโโ 026_create_site_visits_table.sql      # ุฌุฏูู ุงูุฒูุงุฑุงุช ูุงูุฏูุงู
โโโ 027_site_visits_rls_policies.sql      # ุณูุงุณุงุช ุงูุฃูุงู
โโโ 028_add_site_visits_permissions.sql   # ุงูุตูุงุญูุงุช
```

### 2. ุงูุชุชุจุน ุงูุฃูุงูู
```
visit-tracker.js                          # ูุธุงู ุงูุชุชุจุน ุงูุชููุงุฆู
```

### 3. ููุญุฉ ุงูุชุญูู
```
admin/
โโโ dashboard.html                        # ูุณู ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑุงุช
โโโ dashboard.css                         # ุงูุฃููุงุท ุงููุถุงูุฉ
โโโ dashboard.js                          # ุงููุธุงุฆู ุงููุถุงูุฉ
โโโ js/
    โโโ site-visits-manager.js            # ูุฏูุฑ ุงูุฅุญุตุงุฆูุงุช
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูู ุจุชุดุบูู ูููุงุช ุงูู migrations ุจุงูุชุฑุชูุจ:

```bash
# ูู ูุฌูุฏ ุงููุดุฑูุน
supabase db push
```

ุฃู ูุฏููุงู ูู Supabase Dashboard:
1. ุงูุชุญ SQL Editor
2. ููุฐ ูุญุชูู ุงููููุงุช ุจุงูุชุฑุชูุจ (026ุ 027ุ 028)

### 2. ุงูุชุญูู ูู ุงูุชุซุจูุช

ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงูุณูุฑูุจุช ูู ุตูุญุงุช ุงููููุน:

```html
<!-- ูู index.html ู membership.html -->
<script src="supabase-config.js"></script>
<script src="visit-tracker.js"></script>
```

### 3. ุงููุตูู ุฅูู ุงูุฅุญุตุงุฆูุงุช

1. ุณุฌู ุงูุฏุฎูู ุฅูู ููุญุฉ ุงูุชุญูู
2. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **"ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑุงุช"**
3. ุงุณุชุนุฑุถ ุงูุจูุงูุงุช ูุงูุฑุณูู ุงูุจูุงููุฉ

---

## ๐ ูุงุฌูุฉ ุงูุฅุญุตุงุฆูุงุช

### ุงูุจุทุงูุงุช ุงูุฅุญุตุงุฆูุฉ
- **ุฒูุงุฑุงุช ุงูููู**: ุฅุฌูุงูู ุงูุฒูุงุฑุงุช ูุงูุฒูุงุฑ ุงููุฑูุฏูู ููููู ุงูุญุงูู
- **ุฒูุงุฑุงุช ุงูุฃุณุจูุน**: ุฅุญุตุงุฆูุงุช ุขุฎุฑ 7 ุฃูุงู
- **ุฒูุงุฑุงุช ุงูุดูุฑ**: ุฅุญุตุงุฆูุงุช ุขุฎุฑ 30 ููู
- **ูุชูุณุท ูุฏุฉ ุงูุฒูุงุฑุฉ**: ุงููุฏุฉ ุงููุณุทูุฉ ููุนุฏู ุงูุงุฑุชุฏุงุฏ

### ุงูุฑุณูู ุงูุจูุงููุฉ

#### 1. ุงูุฒูุงุฑุงุช ุงูููููุฉ (Line Chart)
- ุฎุท ุฒููู ููุถุญ ุงูุฒูุงุฑุงุช ุงูููููุฉ
- ููุงุฑูุฉ ุจูู ุฅุฌูุงูู ุงูุฒูุงุฑุงุช ูุงูุฒูุงุฑ ุงููุฑูุฏูู
- ุชูุงุนูู ูุน ุฅููุงููุฉ ุงูุชูุจูุฑ

#### 2. ุชูุฒูุน ุงูุฃุฌูุฒุฉ (Doughnut Chart)
- ูุณุจ ุงุณุชุฎุฏุงู ุงูุฃุฌูุฒุฉ ุงููุฎุชููุฉ
- ุณุทุญ ุงูููุชุจุ ุงูุฌูุงูุ ุงูุชุงุจูุช
- ุฃููุงู ูููุฒุฉ ููู ููุน

### ุฃูุซุฑ ุงูุตูุญุงุช ุฒูุงุฑุฉ
- ูุงุฆูุฉ ูุฑุชุจุฉ ุจุฃูุซุฑ 10 ุตูุญุงุช ุฒูุงุฑุฉ
- ุดุฑูุท ุชูุฏู ููุถุญ ุงููุณุจุฉ
- ุนุฏุฏ ุงูุฒูุงุฑุงุช ูุงูุฒูุงุฑ ุงููุฑูุฏูู ููู ุตูุญุฉ

### ุงูููุงุชุฑ ูุงูุฎูุงุฑุงุช
- **ุงููุชุฑุฉ ุงูุฒูููุฉ**: 7 ุฃูุงูุ 30 ูููุ 90 ูููุ ุณูุฉ
- **ุชุญุฏูุซ**: ุชุญุฏูุซ ุงูุจูุงูุงุช ูุฏููุงู
- **ุชุตุฏูุฑ**: ุชุญููู ุงูุจูุงูุงุช ุจุตูุบุฉ CSV

---

## ๐ง ุงูุชุฎุตูุต ูุงูุชุทููุฑ

### ุฅุถุงูุฉ ุตูุญุงุช ุฌุฏูุฏุฉ ููุชุชุจุน

ุงูุณูุฑูุจุช ูุนูู ุชููุงุฆูุงู ุนูู ุฌููุน ุงูุตูุญุงุช ุงูุชู ุชุญุชูู ุนูู:
```html
<script src="supabase-config.js"></script>
<script src="visit-tracker.js"></script>
```

### ุชุฎุตูุต ุฃุณูุงุก ุงูุตูุญุงุช

ูู `site-visits-manager.js`ุ ุนุฏูู ุฏุงูุฉ `getPageName()`:

```javascript
getPageName(path) {
    const pageNames = {
        '/': 'ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ',
        '/index.html': 'ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ',
        '/membership.html': 'ุตูุญุฉ ุงูุนุถููุฉ',
        '/your-page.html': 'ุงุณู ุตูุญุชู',  // ุฃุถู ุตูุญุงุชู ููุง
    };
    return pageNames[path] || path;
}
```

### ุฅุถุงูุฉ ุฑุณูู ุจูุงููุฉ ุฌุฏูุฏุฉ

ุงุณุชุฎุฏู `Chart.js` ูุฅูุดุงุก ุฑุณูู ุจูุงููุฉ ุฅุถุงููุฉ:

```javascript
async function renderCustomChart(canvasId) {
    const canvas = document.getElementById(canvasId);
    const data = await fetchYourData();
    
    new Chart(canvas, {
        type: 'bar', // ุฃู lineุ pieุ doughnut
        data: {
            labels: data.labels,
            datasets: [{
                label: 'ุงูุจูุงูุงุช',
                data: data.values
            }]
        },
        options: {
            responsive: true,
            // ุฎูุงุฑุงุชู ููุง
        }
    });
}
```

---

## ๐ก๏ธ ุงูุฎุตูุตูุฉ ูุงูุฃูุงู

### ูุง ูุชู ุชุฎุฒููู:
- โ ูุนุฑูุงุช ูุฌูููุฉ (UUID ุนุดูุงุฆู)
- โ ูุนูููุงุช ุชูููุฉ (ุงููุชุตูุญุ ุงูุฌูุงุฒ)
- โ ุณููู ุงูุชุตูุญ (ุงูุตูุญุงุชุ ุงููุฏุฉ)

### ูุง ูุง ูุชู ุชุฎุฒููู:
- โ ุฃุณูุงุก ุงููุณุชุฎุฏููู
- โ ุนูุงููู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ูููุงุช ุงููุฑูุฑ
- โ ุจูุงูุงุช ุดุฎุตูุฉ ูุญุฏุฏุฉ

### ุงูุงูุชุซุงู:
- โ ูุง ูุชู ุชุชุจุน ุงููุณุชุฎุฏููู ุนุจุฑ ุงูููุงูุน
- โ ุงูุจูุงูุงุช ูุฌูููุฉ ุชูุงูุงู
- โ ูููู ุญุฐู ุงูุจูุงูุงุช ูู ุฃู ููุช
- โ ูุง ูุชู ูุดุงุฑูุฉ ุงูุจูุงูุงุช ูุน ุฃุทุฑุงู ุซุงูุซุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุฒูุงุฑุงุช ูู ููุญุฉ ุงูุชุญูู

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุชุทุจูู ุฌููุน ูููุงุช ุงูู migrations
2. ุชุญูู ูู ุฅุถุงูุฉ ุงูุณูุฑูุจุช ูู ุตูุญุงุช ุงููููุน
3. ุงูุชุญ Console ูู ุงููุชุตูุญ ูุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript
4. ุชุฃูุฏ ูู ุงุชุตุงู Supabase ุงูุตุญูุญ

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุตูุงุญูุงุช

**ุงูุญููู:**
1. ุชุญูู ูู ูุณุชูู ุฏูุฑ ุงููุณุชุฎุฏู (ูุฌุจ ุฃู ูููู 5 ูุฃุนูู)
2. ุชุฃูุฏ ูู ุชุทุจูู ููู `028_add_site_visits_permissions.sql`
3. ูู ุจุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู

### ุงููุดููุฉ: ุงูุฑุณูู ุงูุจูุงููุฉ ูุง ุชุธูุฑ

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุชุญููู ููุชุจุฉ Chart.js ูู dashboard.html
2. ุงูุชุญ Console ูุงุจุญุซ ุนู ุฃุฎุทุงุก Chart.js
3. ุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุฃุฏุงุก ูุงูุชุญุณูู

### ุงูููุงุฑุณ ุงููููุดุฃุฉ
ุชู ุฅูุดุงุก ููุงุฑุณ ุนูู ุงูุฃุนูุฏุฉ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู:
- `visited_at` (DESC)
- `page_path`
- `visitor_id`
- `session_id`
- `device_type`
- `DATE(visited_at)`

### ุงูุฅุญุตุงุฆูุงุช ุงูููููุฉ
ุฌุฏูู `site_visits_daily_stats` ููุญุฏุซ ุชููุงุฆูุงู ุนุจุฑ Trigger ูุชุญุณูู ุงูุฃุฏุงุก ุนูุฏ ุงูุงุณุชุนูุงูุงุช ุงููุจูุฑุฉ.

### ุงูุชุฎุฒูู ุงููุคูุช
ูููู ุฅุถุงูุฉ Redis ุฃู Memcached ูุชุฎุฒูู ุงูุฅุญุตุงุฆูุงุช ุงูููุญุณูุจุฉ ูุคูุชุงู.

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ููุชุฑุญุงุช ููุชุทููุฑ:
- [ ] ุฅุถุงูุฉ ูุนูููุงุช ุฌุบุฑุงููุฉ (ุงูุฏููุฉุ ุงููุฏููุฉ)
- [ ] ุชุชุจุน ุงูุฃุญุฏุงุซ (ุงูููุฑุงุชุ ุงูุชูุฑูุฑ)
- [ ] ุชูุงุฑูุฑ ูุฌุฏููุฉ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ููุงุฑูุฉ ุงููุชุฑุงุช ุงูุฒูููุฉ
- [ ] ุชุญููู ูุณุงุฑุงุช ุงููุณุชุฎุฏููู (User Flow)
- [ ] ุชูุงูู ูุน Google Analytics
- [ ] ููุญุฉ ุชุญูู ูู ุงูููุช ุงููุนูู (Real-time)

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูููุฒูุฏ ูู ุงููุณุงุนุฏุฉ:
1. ุฑุงุฌุน ูููุงุช ุงูููุฏ ุงููุตุฏุฑู
2. ุงูุญุต Console ูู ุงููุชุตูุญ
3. ุชุญูู ูู Supabase Logs
4. ุงุชุตู ุจูุฑูู ุงูุชุทููุฑ

---

## ๐ ุงูููุงุญุธุงุช ุงูุฎุชุงููุฉ

- ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู
- ุฌููุน ุงููููุงุช ููุซูุฉ ุจุดูู ุฌูุฏ
- ุงูููุฏ ูุธูู ููุงุจู ููุตูุงูุฉ
- ูููู ุงูุชูุณุน ุจุณูููุฉ

**ุชู ุฅูุดุงุก ุงููุธุงู ุจูุงุณุทุฉ:** Cascade AI  
**ุงูุชุงุฑูุฎ:** 2026-01-20  
**ุงูุฅุตุฏุงุฑ:** 1.0.0

---

## ๐ ุดูุฑุงู ูุงุณุชุฎุฏุงู ูุธุงู ุชุชุจุน ุงูุฒูุงุฑุงุช!

ูุชููู ุฃู ูุณุงุนุฏู ูุฐุง ุงููุธุงู ูู ููู ุณููู ุฒูุงุฑ ูููุน ูุงุฏู ุฃุฏูุจ ุจุดูู ุฃูุถู ูุงุชุฎุงุฐ ูุฑุงุฑุงุช ูุจููุฉ ุนูู ุงูุจูุงูุงุช.
