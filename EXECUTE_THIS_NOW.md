# โก ููุฐ ูุฐุง ุงูุขู - ุงูุญู ุงูููุงุฆู

## ๐ฏ ุงูุฎุทูุฉ ุงููุญูุฏุฉ ุงููุทููุจุฉ

### ุงูุชุญ Supabase SQL Editor ูููุฐ ูุฐุง ุงูููู:

```
FINAL_FIX_PHONE_VALIDATION.sql
```

**ูุฐุง ูู ุดูุก!** โ

---

## ๐ ูุง ุณูุญุฏุซ

1. โ ุญุฐู ุงูุฏุงูุฉ ุงููุฏููุฉ (ุงูุชู ุจูุง ุฎุทุฃ ุงูุฃุนูุฏุฉ ุงูุบุงูุถุฉ)
2. โ ุฅูุดุงุก ุฏุงูุฉ `normalize_phone()` ูุญุณููุฉ
3. โ ุฅูุดุงุก ุฏุงูุฉ `validate_phone_for_booking()` **ุจุฏูู ุฃุฎุทุงุก**
4. โ ุฅูุดุงุก index ููุฃุฏุงุก
5. โ ุงุฎุชุจุงุฑ ุชููุงุฆู ูุนุฑุถ ุงููุชุงุฆุฌ

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุงูุชูููุฐุ ุณุชุธูุฑ ุฑุณุงุฆู ูุซู:

```
โ ุชู ุฅูุดุงุก ุงูุฏุงูุฉ ุจูุฌุงุญ
๐ ุนุฏุฏ ุงูุทูุจุงุช ุงูููุจููุฉ ููููุงุจูุฉ: X
๐ ุนููุฉ ูู ุงูุทูุจุงุช ุงูููุจููุฉ:
   โ ุงุณู ุงููุชูุฏู | 0512345678 โ 0512345678
๐งช ุงุฎุชุจุงุฑ ุชูุญูุฏ ุงูุฃุฑูุงู:
   normalize_phone('0576646958') = 0576646958
โ ุงูุฏุงูุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู
```

---

## ๐ ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ ุชุญุฐูุฑ

```
โ๏ธ ูุง ุชูุฌุฏ ุทูุจุงุช ุจุญุงูุฉ "approved_for_interview"
```

**ุงูุญู**: ููุฐ ูุฐุง ุงูุงุณุชุนูุงู ูุชุญุฏูุซ ุญุงูุฉ ุจุนุถ ุงูุทูุจุงุช:

```sql
UPDATE membership_applications
SET status = 'approved_for_interview',
    approved_for_interview_at = NOW()
WHERE phone IN ('0576646958', '0570787919', '0565095542')
LIMIT 3;
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

1. ุงูุชุญ `booking.html?token=xxx`
2. ุฃุฏุฎู ุฃู ุฑูู ูู ุงูุฃุฑูุงู ุงูููุจููุฉ
3. ูุฌุจ ุฃู ูุนูู ุจูุฌุงุญ โ

---

## โ ูุง ุชู ุฅุตูุงุญู

### ุงูุฎุทุฃ ุงูุณุงุจู:
```
column reference "full_name" is ambiguous
```

### ุงูุณุจุจ:
ุงุณุชุฎุฏุงู `SELECT *` ูุน ุฃุณูุงุก ุฃุนูุฏุฉ ูุจุงุดุฑุฉ ูู ููุณ ุงูุงุณุชุนูุงู

### ุงูุญู:
ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ูุญููุฉ (`v_app_name`, `v_app_email`, ุฅูุฎ) ุจุฏูุงู ูู `SELECT *`

---

## ๐ ุงูููู ุงููุทููุจ

`FINAL_FIX_PHONE_VALIDATION.sql` โญ

**ููุฐู ุงูุขู ูู Supabase SQL Editor**
