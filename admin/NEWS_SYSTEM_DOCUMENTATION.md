# ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุฎุจุงุฑ ุงููุทูุฑ - ูุงุฏู ุฃุฏููุจ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุฎุจุงุฑ ููุดูู workflow ูุงูู ูู ุฅูุดุงุก ุงููุณูุฏุฉ ุญุชู ุงููุดุฑุ ูุน ุฅููุงููุฉ ุชุนููู ูุชูุงุจ ูุชุนุฏุฏูู ููู ุฎุจุฑ ูุชุชุจุน ุญุงูุฉ ูู ูุฑุญูุฉ.

## ๐๏ธ ูููู ุงููุธุงู

### ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 1. ุฌุฏูู `news` (ูุญุฏูุซ)
ุงูุญููู ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ:
- `workflow_status`: ุญุงูุฉ ุณูุฑ ุงูุนูู (draft, assigned, in_progress, ready_for_review, published, archived)
- `assigned_writers`: ูุตูููุฉ ูุนุฑูุงุช ุงููุชูุงุจ ุงููุนูููู
- `assigned_by`: ูู ูุงู ุจุงูุชุนููู
- `assigned_at`: ููุช ุงูุชุนููู
- `available_fields`: ุงูุญููู ุงููุชุงุญุฉ ูููุชูุงุจ (jsonb)
- `submitted_at`: ููุช ุฅุฑุณุงู ุงูุฎุจุฑ ูููุฑุงุฌุนุฉ
- `reviewed_by`: ูู ุฑุงุฌุน ุงูุฎุจุฑ
- `reviewed_at`: ููุช ุงููุฑุงุฌุนุฉ
- `committee_id`: ุงููุฌูุฉ ุงููุณุคููุฉ
- `review_notes`: ููุงุญุธุงุช ุงููุฑุงุฌุนุฉ
- `rejection_reason`: ุณุจุจ ุงูุฑูุถ

#### 2. ุฌุฏูู `news_writer_assignments` (ุฌุฏูุฏ)
ูุชุชุจุน ุชุนูููุงุช ุงููุชูุงุจ ููุฃุฎุจุงุฑ:
- `id`: ูุนุฑู ุงูุชุนููู
- `news_id`: ูุนุฑู ุงูุฎุจุฑ
- `writer_id`: ูุนุฑู ุงููุงุชุจ
- `assigned_by`: ูู ูุงู ุจุงูุชุนููู
- `status`: ุญุงูุฉ ุงูุชุนููู (pending, accepted, declined, in_progress, completed)
- `notified`: ูู ุชู ุฅุฑุณุงู ุฅุดุนุงุฑ
- `started_at`: ููุช ุจุฏุก ุงููุชุงุจุฉ
- `completed_at`: ููุช ุงูุฅููุงู
- `assignment_notes`: ุชุนูููุงุช ูููุงุชุจ

#### 3. ุฌุฏูู `news_field_permissions` (ุฌุฏูุฏ)
ูุญุฏุฏ ุงูุญููู ุงููุชุงุญุฉ ูููุชูุงุจ:
- `news_id`: ูุนุฑู ุงูุฎุจุฑ
- `writer_id`: ูุนุฑู ุงููุงุชุจ (null ููุฌููุน)
- `field_name`: ุงุณู ุงูุญูู
- `is_editable`: ูู ูููู ุงูุชุนุฏูู
- `is_required`: ูู ุงูุญูู ุฅุฌุจุงุฑู

#### 4. ุฌุฏูู `news_activity_log` (ุฌุฏูุฏ)
ุณุฌู ุฌููุน ุงููุดุงุทุงุช ุนูู ุงูุฃุฎุจุงุฑ:
- `news_id`: ูุนุฑู ุงูุฎุจุฑ
- `user_id`: ูุนุฑู ุงููุณุชุฎุฏู
- `action`: ููุน ุงููุดุงุท
- `details`: ุชูุงุตูู ุฅุถุงููุฉ (jsonb)

#### 5. ุฌุฏูู `news_collaboration_comments` (ุฌุฏูุฏ)
ุชุนูููุงุช ุฏุงุฎููุฉ ุจูู ุงููุงุฏุฉ ูุงููุชูุงุจ:
- `news_id`: ูุนุฑู ุงูุฎุจุฑ
- `user_id`: ูุนุฑู ุงููุนูู
- `comment_text`: ูุต ุงูุชุนููู
- `is_internal`: ุชุนููู ุฏุงุฎูู
- `parent_comment_id`: ููุฑุฏูุฏ
- `mentioned_users`: ุงููุณุชุฎุฏููู ุงููุฐููุฑูู

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### ุงููุฑุญูุฉ 1: ุฅูุดุงุก ุงููุณูุฏุฉ
**ุงููุงุนู**: ูุงุฆุฏ ุงููุฌูุฉ ุฃู ูุงุฆุจู

**ุงูุฎุทูุงุช**:
1. ุงูุถุบุท ุนูู "ุฅูุดุงุก ูุณูุฏุฉ ุฌุฏูุฏุฉ"
2. ุฅุฏุฎุงู ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ:
   - ุนููุงู ุงูุฎุจุฑ
   - ุงููุฌูุฉ ุงููุณุคููุฉ (ููุฑุฆูุณ ููุท)
   - ุงูุชุตููู
   - ููุงุญุธุงุช ุฃูููุฉ
3. ุญูุธ ุงููุณูุฏุฉ
4. **ุงููุชูุฌุฉ**: `workflow_status = 'draft'`

### ุงููุฑุญูุฉ 2: ุชุนููู ุงููุชูุงุจ
**ุงููุงุนู**: ูุงุฆุฏ ุงููุฌูุฉ ุฃู ูุงุฆุจู

**ุงูุฎุทูุงุช**:
1. ุงุฎุชูุงุฑ ุงููุณูุฏุฉ
2. ุงูุถุบุท ุนูู "ุชุนููู ูุชูุงุจ"
3. ุงุฎุชูุงุฑ ุงููุชูุงุจ ูู ูุงุฆูุฉ ุฃุนุถุงุก ุงููุฌูุฉ
4. ุชุญุฏูุฏ ุงูุญููู ุงููุชุงุญุฉ ูููุชูุงุจ:
   - ุงููุญุชูู ุงูุฑุฆูุณู
   - ุงูููุฎุต
   - ุงูุตูุฑุฉ
   - ุงููุณูู
5. ุฅุถุงูุฉ ุชุนูููุงุช ูููุชูุงุจ
6. **ุงููุชูุฌุฉ**: 
   - `workflow_status = 'assigned'`
   - ุฅูุดุงุก ุณุฌูุงุช ูู `news_writer_assignments`
   - ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูููุชูุงุจ

### ุงููุฑุญูุฉ 3: ุงููุชุงุจุฉ
**ุงููุงุนู**: ุงููุชูุงุจ ุงููุนูููู

**ูุง ูุฑุงู ุงููุงุชุจ**:
- ุฅุดุนุงุฑ ุจูุฌูุฏ ุฎุจุฑ ุฌุฏูุฏ
- ูุณู "ุงูุฃุฎุจุงุฑ ุงููุนููุฉ ูู" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
- ุงูุญููู ุงููุชุงุญุฉ ููุชุนุฏูู ููุท

**ุงูุฎุทูุงุช**:
1. ูุชุญ ุงูุฎุจุฑ ุงููุนูู
2. ุงูุถุบุท ุนูู "ุจุฏุก ุงููุชุงุจุฉ"
3. ูุชุงุจุฉ ุงููุญุชูู ูู ุงูุญููู ุงููุชุงุญุฉ
4. ุญูุธ ุงูุชูุฏู (auto-save ูู ุฏูููุฉ)
5. ุงูุถุบุท ุนูู "ุฅุฑุณุงู ูููุฑุงุฌุนุฉ" ุนูุฏ ุงูุงูุชูุงุก
6. **ุงููุชูุฌุฉ**:
   - `assignment.status = 'completed'`
   - ุนูุฏ ุฅููุงู ุฌููุน ุงููุชูุงุจ: `workflow_status = 'ready_for_review'`
   - ุฅุดุนุงุฑ ูููุงุฆุฏ

### ุงููุฑุญูุฉ 4: ุงููุฑุงุฌุนุฉ
**ุงููุงุนู**: ูุงุฆุฏ ุงููุฌูุฉ ุฃู ูุงุฆุจู

**ุงูุฎูุงุฑุงุช**:
1. **ูุดุฑ**: ููุชูู ูููุดุฑ ูุจุงุดุฑุฉ
2. **ุทูุจ ุชุนุฏููุงุช**: ูุนูุฏู ูููุชูุงุจ ูุน ููุงุญุธุงุช
3. **ุชุนุฏูู ููุดุฑ**: ูุนุฏู ุจููุณู ุซู ููุดุฑ

### ุงููุฑุญูุฉ 5: ุงููุดุฑ
**ุงููุงุนู**: ูุงุฆุฏ ุงููุฌูุฉ ุฃู ูุงุฆุจู

**ุงูุฎุทูุงุช**:
1. ุงูุถุบุท ุนูู "ูุดุฑ ุงูุฎุจุฑ"
2. ุชุญุฏูุฏ:
   - ูู ุงูุฎุจุฑ ูููุฒุ
   - ุชุงุฑูุฎ ุงููุดุฑ
   - ููุงุญุธุงุช ุงููุดุฑ
3. **ุงููุชูุฌุฉ**:
   - `workflow_status = 'published'`
   - `status = 'published'`
   - ุงูุฎุจุฑ ูุธูุฑ ูู ุงููููุน
   - ุฅุดุนุงุฑ ูููุชูุงุจ

## ๐ ุงููููุงุช

### JavaScript
1. **news-workflow-manager.js**: ุฅุฏุงุฑุฉ ุณูุฑ ุงูุนูู ุงููุงูู
   - `createNewsDraft()`: ุฅูุดุงุก ูุณูุฏุฉ ุฌุฏูุฏุฉ
   - `assignWriters()`: ุชุนููู ูุชูุงุจ
   - `submitForReview()`: ุฅุฑุณุงู ูููุฑุงุฌุนุฉ
   - `reviewAndPublish()`: ูุฑุงุฌุนุฉ ููุดุฑ

2. **news-writers-manager.js**: ุฅุฏุงุฑุฉ ูุงุฌูุฉ ุงููุชูุงุจ
   - `loadMyAssignments()`: ุชุญููู ุงูุฃุฎุจุงุฑ ุงููุนููุฉ
   - `startWriting()`: ุจุฏุก ุงููุชุงุจุฉ
   - `continueWriting()`: ูุชุงุจุนุฉ ุงููุชุงุจุฉ
   - `saveNewsContent()`: ุญูุธ ุงููุญุชูู

3. **news-manager-enhanced.js**: ุงููุฏูุฑ ุงูุฑุฆูุณู
   - `loadAllNews()`: ุชุญููู ุฌููุน ุงูุฃุฎุจุงุฑ
   - `renderDrafts()`: ุนุฑุถ ุงููุณูุฏุงุช
   - `renderInProgress()`: ุนุฑุถ ููุฏ ุงููุชุงุจุฉ
   - `renderReadyForReview()`: ุนุฑุถ ุฌุงูุฒ ูููุฑุงุฌุนุฉ
   - `renderPublished()`: ุนุฑุถ ุงูููุดูุฑุฉ

### CSS
- **news-workflow.css**: ุชูุณููุงุช ุงููุธุงู ุงูุฌุฏูุฏ

### HTML
ุงูุชุจููุจุงุช ูู `dashboard.html`:
- `news-drafts-section`: ูุณูุฏุงุช ุงูุฃุฎุจุงุฑ
- `news-in-progress-section`: ููุฏ ุงููุชุงุจุฉ
- `news-review-section`: ุฌุงูุฒ ูููุฑุงุฌุนุฉ
- `news-published-section`: ุงูุฃุฎุจุงุฑ ุงูููุดูุฑุฉ
- `news-archived-section`: ุงูุฃุฎุจุงุฑ ุงููุคุฑุดูุฉ
- `news-my-assignments-section`: ุงูุฃุฎุจุงุฑ ุงููุนููุฉ ูู

## ๐ ุงูุตูุงุญูุงุช

| ุงูุฏูุฑ | ุฅูุดุงุก | ุชุนููู ูุชูุงุจ | ุงููุชุงุจุฉ | ุงููุฑุงุฌุนุฉ | ุงููุดุฑ | ุงูุญุฐู |
|------|------|------------|---------|----------|-------|-------|
| **ูุงุฆุฏ ุงููุฌูุฉ** | โ | โ | โ | โ | โ | โ |
| **ูุงุฆุจ ุงููุฌูุฉ** | โ | โ | โ | โ | โ | โ |
| **ุงููุงุชุจ ุงููุนูู** | โ | โ | โ (ุญูููู ููุท) | โ | โ | โ |
| **ุนุถู ุนุงุฏู** | โ | โ | โ | โ | โ | โ |

## ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ุฅุดุนุงุฑุงุช ูููุชูุงุจ:
1. ุชู ุชุนูููู ููุชุงุจุฉ ุฎุจุฑ ุฌุฏูุฏ
2. ุทููุจ ููู ุชุนุฏูู ุงูุฎุจุฑ
3. ุชู ูุจูู ููุดุฑ ุงูุฎุจุฑ ุงูุฐู ูุชุจุชู

### ุฅุดุนุงุฑุงุช ูููุงุฏุฉ:
1. ุฃููู ุงููุงุชุจ ูุชุงุจุฉ ุงูุฎุจุฑ
2. ุฎุจุฑ ุฌุงูุฒ ูููุฑุงุฌุนุฉ

## ๐จ ูุงุฌูุงุช ุงููุณุชุฎุฏู

### ูุงุฌูุฉ ูุงุฆุฏ ุงููุฌูุฉ:
- **ูุณูุฏุงุช ุงูุฃุฎุจุงุฑ**: ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงููุณูุฏุงุช
- **ููุฏ ุงููุชุงุจุฉ**: ูุชุงุจุนุฉ ุชูุฏู ุงููุชูุงุจ
- **ุฌุงูุฒ ูููุฑุงุฌุนุฉ**: ูุฑุงุฌุนุฉ ููุดุฑ ุงูุฃุฎุจุงุฑ
- **ุงูุฃุฎุจุงุฑ ุงูููุดูุฑุฉ**: ุฅุฏุงุฑุฉ ุงูุฃุฎุจุงุฑ ุงูููุดูุฑุฉ
- **ุงูุฃุฎุจุงุฑ ุงููุคุฑุดูุฉ**: ุฃุฑุดูู ุงูุฃุฎุจุงุฑ

### ูุงุฌูุฉ ุงููุงุชุจ:
- **ุงูุฃุฎุจุงุฑ ุงููุนููุฉ ูู**: ูุงุฆูุฉ ุจุฌููุน ุงูุฃุฎุจุงุฑ ุงููุนููุฉ
- ุฅุญุตุงุฆูุงุช: ูู ุงูุงูุชุธุงุฑุ ููุฏ ุงููุชุงุจุฉุ ููุชููุฉ
- ูุญุฑุฑ ูุตูุต ุบูู ูููุชุงุจุฉ
- ูุนุงููุฉ ูุจู ุงูุฅุฑุณุงู

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ุฅุญุตุงุฆูุงุช ุนุงูุฉ:
- ุฅุฌูุงูู ุงููุณูุฏุงุช
- ุงูุฃุฎุจุงุฑ ุงููุนููุฉ ูููุชูุงุจ
- ููุฏ ุงููุชุงุจุฉ
- ุฌุงูุฒ ูููุฑุงุฌุนุฉ
- ุงูุฃุฎุจุงุฑ ุงูููุดูุฑุฉ
- ุงูุฃุฎุจุงุฑ ุงููููุฒุฉ
- ุฅุฌูุงูู ุงููุดุงูุฏุงุช

### ุฅุญุตุงุฆูุงุช ุงููุงุชุจ:
- ุงูุฃุฎุจุงุฑ ูู ุงูุงูุชุธุงุฑ
- ููุฏ ุงููุชุงุจุฉ
- ุงูููุชููุฉ
- ุงูุฅุฌูุงูู

## ๐๏ธ ุงูุฏูุงู ุงููุณุงุนุฏุฉ

### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
-- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุชุงุจุฉ ุนูู ุญูู
can_writer_edit_field(news_id, writer_id, field_name)

-- ุชุณุฌูู ูุดุงุท
log_news_activity(news_id, action, details)

-- ุงูุญุตูู ุนูู ุนุฏุฏ ุงููุชูุงุจ ุงูููุชูููู
get_completed_writers_count(news_id)

-- ุงูุญุตูู ุนูู ุฅุฌูุงูู ุงููุชูุงุจ
get_total_writers_count(news_id)
```

## ๐ ุงูุชููุฆุฉ

### ูู dashboard.js:
```javascript
// ุชููุฆุฉ ุงููุธุงู
if (window.NewsManagerEnhanced && currentUser) {
    await window.NewsManagerEnhanced.init(currentUser, userRoles);
}

// ุชููุฆุฉ ูุงุฌูุฉ ุงููุชูุงุจ
if (window.NewsWritersManager && currentUser) {
    await window.NewsWritersManager.init(currentUser);
}
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. **Auto-save**: ูุชู ุญูุธ ุนูู ุงููุงุชุจ ุชููุงุฆูุงู ูู ุฏูููุฉ
2. **RLS Policies**: ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ ุจุณูุงุณุงุช RLS
3. **Activity Log**: ูุชู ุชุณุฌูู ุฌููุน ุงููุดุงุทุงุช
4. **Notifications**: ูุธุงู ุฅุดุนุงุฑุงุช ูุชูุงูู
5. **Permissions**: ุตูุงุญูุงุช ุฏูููุฉ ููู ุญูู

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ุงูููุชุฑุญุฉ

1. **Version History**: ุณุฌู ุงูุชุนุฏููุงุช
2. **Comments System**: ุชุนูููุงุช ุจูู ุงููุงุฏุฉ ูุงููุชูุงุจ
3. **Templates**: ููุงูุจ ุฌุงูุฒุฉ ููุฃุฎุจุงุฑ
4. **Scheduling**: ุฌุฏููุฉ ุงููุดุฑ
5. **Analytics**: ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ ููู ุฎุจุฑ
6. **Rich Text Editor**: ูุญุฑุฑ ูุตูุต ูุชูุฏู
7. **Media Library**: ููุชุจุฉ ูุณุงุฆุท
8. **SEO Tools**: ุฃุฏูุงุช ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2026-02-04  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงููุทูุฑ**: ูุธุงู ุฅุฏุงุฑุฉ ูุงุฏู ุฃุฏููุจ
