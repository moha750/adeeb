<!doctype html>
<html dir="rtl" lang="ar">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>لوحة التحكم — نظام إدارة نادي أديب</title>
    <meta name="robots" content="noindex, nofollow" />
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3b82f6" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="أدِيب" />
    <link rel="manifest" href="../manifest.json" />
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <link rel="stylesheet" href="dashboard.css" />
    <link rel="stylesheet" href="css/member-migration.css" />
    <link rel="stylesheet" href="css/notifications.css" />
    <!-- <link rel="stylesheet" href="dashboard-archives.css" /> -->
</head>

<body>
    <!-- شريط التحميل -->
    <div id="loadingBar" class="loading-bar">
        <div class="loading-progress"></div>
    </div>

    <!-- الهيدر -->
    <header class="admin-header">
        <div class="admin-header__container">
            <button id="toggleSidebar" title="القائمة">
                <i class="fa-solid fa-bars"></i>
            </button>
            
            <div class="user-info">
                <div class="user-greeting">
                    <span id="greetingText" class="greeting-text"></span>
                    <span id="userName" class="user-name"></span>
                </div>
                <img id="userAvatar" class="user-avatar" src="" alt="صورة المستخدم" />
            </div>
            
            <!-- مركز الإشعارات -->
            <div class="notifications-center">
                <button id="notificationsBtn" class="notifications-btn" title="الإشعارات">
                    <i class="fa-solid fa-bell"></i>
                    <span class="notifications-badge" id="notificationsBadge">0</span>
                </button>
                <div class="notifications-dropdown" id="notificationsDropdown">
                    <div class="notifications-header">
                        <h3>الإشعارات</h3>
                        <button class="btn-text" id="markAllReadBtn">تعليم الكل كمقروء</button>
                    </div>
                    <div class="notifications-list" id="notificationsList">
                        <div class="empty-notifications">
                            <i class="fa-solid fa-bell-slash"></i>
                            <p>لا توجد إشعارات جديدة</p>
                        </div>
                    </div>
                    <div class="notifications-footer">
                        <a href="#" id="viewAllNotifications">عرض جميع الإشعارات</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- التخطيط الرئيسي -->
    <div class="admin-layout">
        <!-- الشريط الجانبي -->
        <aside class="admin-sidebar" id="sidebar">
            <div class="admin-sidebar__header">
                <h3>لوحة التحكم</h3>
                <button class="btn-icon" id="closeSidebar">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <nav class="admin-nav" id="mainNav">
                <!-- سيتم ملؤها ديناميكياً بناءً على الصلاحيات -->
            </nav>
            <div class="admin-sidebar__footer">
                <a href="../index.html" target="_blank" class="btn-outline">
                    <i class="fa-solid fa-globe"></i>
                    موقع أدِيب
                </a>
                <button type="button" class="btn-outline btn-danger" id="logoutBtn">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    تسجيل الخروج
                </button>
            </div>
        </aside>

        <!-- المحتوى الرئيسي -->
        <main class="admin-main" id="mainContent">
            <!-- لوحة المعلومات الرئيسية -->
            <section id="dashboard-section" class="admin-section">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-chart-line"></i>
                        لوحة المعلومات
                    </h1>
                    <p class="section-subtitle">نظرة عامة على أداء النادي</p>
                </div>

                <!-- بطاقات الإحصائيات -->
                <div class="stats-grid" id="statsGrid">
                    <!-- سيتم ملؤها ديناميكياً -->
                </div>


                <!-- النشاطات الأخيرة -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fa-solid fa-clock-rotate-left"></i> النشاطات الأخيرة</h3>
                        <button class="btn-sm btn-outline" id="refreshActivities">
                            <i class="fa-solid fa-rotate"></i>
                            تحديث
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="recentActivities" class="activities-list">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم إدارة المستخدمين -->
            <section id="users-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-users"></i>
                        إدارة المستخدمين
                    </h1>
                    <button class="btn-primary" id="addUserBtn">
                        <i class="fa-solid fa-user-plus"></i>
                        إضافة مستخدم
                    </button>
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="userSearchInput" placeholder="البحث عن مستخدم..." />
                    </div>
                    <select id="roleFilter" class="filter-select">
                        <option value="">جميع الأدوار</option>
                    </select>
                    <select id="committeeFilter" class="filter-select">
                        <option value="">جميع اللجان</option>
                    </select>
                    <select id="statusFilter" class="filter-select">
                        <option value="">جميع الحالات</option>
                        <option value="active">نشط</option>
                        <option value="inactive">غير نشط</option>
                        <option value="suspended">معلق</option>
                    </select>
                </div>

                <!-- جدول المستخدمين -->
                <div class="card">
                    <div class="card-body">
                        <div id="usersTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم إدارة اللجان -->
            <section id="committees-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-sitemap"></i>
                        إدارة اللجان
                    </h1>
                    <button class="btn-primary" id="addCommitteeBtn">
                        <i class="fa-solid fa-plus"></i>
                        إضافة لجنة
                    </button>
                </div>

                <div class="committees-grid" id="committeesGrid">
                    <!-- سيتم ملؤها ديناميكياً -->
                </div>
            </section>

            <!-- قسم إحصائيات الزيارات -->
            <section id="site-visits-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-chart-line"></i>
                        إحصائيات زيارات الموقع
                    </h1>
                    <div class="section-actions">
                        <select id="visitsPeriodFilter" class="filter-select">
                            <option value="7">آخر 7 أيام</option>
                            <option value="30" selected>آخر 30 يوم</option>
                            <option value="90">آخر 90 يوم</option>
                            <option value="365">آخر سنة</option>
                        </select>
                        <button class="btn-outline btn-sm" id="exportVisitsBtn">
                            <i class="fa-solid fa-download"></i>
                            تصدير البيانات
                        </button>
                        <button class="btn-outline btn-sm" id="refreshVisitsBtn">
                            <i class="fa-solid fa-rotate"></i>
                            تحديث
                        </button>
                    </div>
                </div>

                <!-- بطاقات الإحصائيات -->
                <div class="stats-grid" id="visitsStatsGrid">
                    <!-- سيتم ملؤها ديناميكياً -->
                </div>

                <!-- الرسوم البيانية -->
                <div class="charts-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-chart-area"></i> الزيارات اليومية</h3>
                        </div>
                        <div class="card-body" style="height: 300px;">
                            <canvas id="visitsTimelineChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-mobile-screen"></i> توزيع الأجهزة</h3>
                        </div>
                        <div class="card-body" style="height: 300px;">
                            <canvas id="devicesChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- إحصائيات الدول والمدن -->
                <div class="charts-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-globe"></i> توزيع الدول</h3>
                        </div>
                        <div class="card-body" style="height: 300px;">
                            <canvas id="countriesChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-location-dot"></i> توزيع المدن</h3>
                        </div>
                        <div class="card-body" style="height: 300px;">
                            <canvas id="citiesChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- أكثر الصفحات زيارة -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fa-solid fa-fire"></i> أكثر الصفحات زيارة</h3>
                    </div>
                    <div class="card-body">
                        <div id="topPagesContainer">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- =====================================================
                 أقسام إدارة الاستبيانات
                 ===================================================== -->

            <!-- قسم جميع الاستبيانات -->
            <section id="surveys-all-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-clipboard-question"></i>
                        جميع الاستبيانات
                    </h1>
                    <button class="btn-primary" id="createNewSurveyBtn">
                        <i class="fa-solid fa-plus"></i>
                        إنشاء استبيان جديد
                    </button>
                </div>

                <!-- إحصائيات الاستبيانات -->
                <div class="stats-grid">
                    <div class="stat-card" style="--stat-color: #3b82f6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-clipboard-list"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalSurveysCount">0</div>
                                <div class="stat-label">إجمالي الاستبيانات</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #10b981">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="activeSurveysCount">0</div>
                                <div class="stat-label">استبيانات نشطة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #8b5cf6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalResponsesCount">0</div>
                                <div class="stat-label">إجمالي الاستجابات</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #f59e0b">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="completedResponsesCount">0</div>
                                <div class="stat-label">استجابات مكتملة</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="surveysSearchInput" placeholder="البحث في الاستبيانات..." />
                    </div>
                    <select id="surveysStatusFilter" class="filter-select">
                        <option value="">جميع الحالات</option>
                        <option value="draft">مسودة</option>
                        <option value="active">نشط</option>
                        <option value="paused">متوقف</option>
                        <option value="closed">مغلق</option>
                        <option value="archived">مؤرشف</option>
                    </select>
                    <select id="surveysTypeFilter" class="filter-select">
                        <option value="">جميع الأنواع</option>
                        <option value="general">عام</option>
                        <option value="membership">عضوية</option>
                        <option value="event">فعالية</option>
                        <option value="feedback">تقييم</option>
                        <option value="evaluation">تقويم</option>
                        <option value="poll">استطلاع</option>
                        <option value="quiz">اختبار</option>
                        <option value="research">بحث</option>
                    </select>
                    <button class="btn-outline" id="refreshSurveysBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                </div>

                <!-- قائمة الاستبيانات -->
                <div id="surveysListContainer" class="surveys-list">
                    <!-- سيتم ملؤها ديناميكياً -->
                </div>
            </section>

            <!-- قسم إنشاء استبيان -->
            <section id="surveys-create-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-plus-circle"></i>
                        إنشاء استبيان جديد
                    </h1>
                    <div class="header-actions">
                        <button class="btn-outline" id="saveSurveyDraftBtn">
                            <i class="fa-solid fa-save"></i>
                            حفظ كمسودة
                        </button>
                        <button class="btn-primary" id="publishSurveyBtn">
                            <i class="fa-solid fa-paper-plane"></i>
                            نشر الاستبيان
                        </button>
                    </div>
                </div>

                <!-- نموذج إنشاء الاستبيان -->
                <div id="surveyBuilderContainer" class="survey-builder">
                    <!-- سيتم ملؤه ديناميكياً -->
                </div>
            </section>

            <!-- قسم نتائج الاستبيانات -->
            <section id="surveys-results-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-chart-pie"></i>
                        نتائج الاستبيانات
                    </h1>
                    <p class="section-subtitle">تحليل شامل لجميع الاستجابات والإحصائيات</p>
                </div>

                <!-- اختيار الاستبيان -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-body">
                        <div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap;">
                            <div class="filter-group" style="flex: 1; min-width: 300px;">
                                <label for="selectSurveyForResults">اختر الاستبيان:</label>
                                <select id="selectSurveyForResults" class="filter-select">
                                    <option value="">-- اختر استبياناً --</option>
                                </select>
                            </div>
                            <div class="header-actions" id="resultsActions" style="display: none;">
                                <button class="btn-outline" id="exportExcelBtn">
                                    <i class="fa-solid fa-file-excel"></i>
                                    تصدير Excel
                                </button>
                                <button class="btn-outline" id="exportCSVBtn">
                                    <i class="fa-solid fa-file-csv"></i>
                                    تصدير CSV
                                </button>
                                <button class="btn-outline" id="exportPDFBtn">
                                    <i class="fa-solid fa-file-pdf"></i>
                                    تصدير PDF
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- التبويبات -->
                <div class="tabs-container" id="resultsTabsContainer" style="display: none;">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="statistics">
                            <i class="fa-solid fa-chart-bar"></i>
                            الإحصائيات
                        </button>
                        <button class="tab-btn" data-tab="responses">
                            <i class="fa-solid fa-list"></i>
                            الاستجابات الفردية
                        </button>
                        <button class="tab-btn" data-tab="analytics">
                            <i class="fa-solid fa-chart-line"></i>
                            التحليلات المتقدمة
                        </button>
                    </div>

                    <!-- محتوى التبويبات -->
                    <div class="tabs-content">
                        <!-- تبويب الإحصائيات -->
                        <div class="tab-pane active" id="statistics-tab">
                            <div id="surveyStatisticsContainer">
                                <!-- سيتم ملؤه ديناميكياً -->
                            </div>
                        </div>

                        <!-- تبويب الاستجابات -->
                        <div class="tab-pane" id="responses-tab">
                            <div id="surveyResponsesContainer">
                                <!-- سيتم ملؤه ديناميكياً -->
                            </div>
                        </div>

                        <!-- تبويب التحليلات المتقدمة -->
                        <div class="tab-pane" id="analytics-tab">
                            <div id="surveyAnalyticsContainer">
                                <!-- سيتم ملؤه ديناميكياً -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم قوالب الاستبيانات -->
            <section id="surveys-templates-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-file-lines"></i>
                        قوالب الاستبيانات
                    </h1>
                    <button class="btn-primary" id="createTemplateBtn">
                        <i class="fa-solid fa-plus"></i>
                        إنشاء قالب جديد
                    </button>
                </div>

                <!-- فئات القوالب -->
                <div class="filters-bar">
                    <select id="templatesFilterCategory" class="filter-select">
                        <option value="">جميع الفئات</option>
                        <option value="general">عام</option>
                        <option value="membership">عضوية</option>
                        <option value="event">فعالية</option>
                        <option value="feedback">تقييم</option>
                        <option value="evaluation">تقويم</option>
                        <option value="custom">مخصص</option>
                    </select>
                    <button class="btn-outline" id="refreshTemplatesBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                </div>

                <!-- قائمة القوالب -->
                <div id="templatesListContainer" class="templates-grid">
                    <!-- سيتم ملؤها ديناميكياً -->
                </div>
            </section>

            <!-- قسم الملف الشخصي -->
            <section id="profile-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-user-circle"></i>
                        الملف الشخصي
                    </h1>
                    <p class="section-subtitle">إدارة معلوماتك الشخصية والأمان</p>
                </div>

                <!-- بطاقة المعلومات الأساسية -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-user"></i>
                            المعلومات الأساسية
                        </h3>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 1.5rem;">
                            <div style="display: flex; align-items: center; gap: 1.5rem;">
                                <div style="position: relative;">
                                    <img id="profileAvatar" src="" alt="الصورة الشخصية" 
                                         style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #e2e8f0;">
                                </div>
                                <div>
                                    <h3 id="profileFullName" style="margin: 0 0 0.5rem 0; color: #274060;">جاري التحميل...</h3>
                                    <p id="profileRole" style="margin: 0; color: #64748b; font-size: 0.95rem;">
                                        <i class="fa-solid fa-shield-halved"></i>
                                        <span>جاري التحميل...</span>
                                    </p>
                                </div>
                            </div>
                            <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">البريد الإلكتروني</label>
                                    <p id="profileEmail" style="margin: 0; color: #274060;">جاري التحميل...</p>
                                </div>
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">رقم الهاتف</label>
                                    <p id="profilePhone" style="margin: 0; color: #274060;">غير محدد</p>
                                </div>
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">تاريخ الانضمام</label>
                                    <p id="profileJoinDate" style="margin: 0; color: #274060;">جاري التحميل...</p>
                                </div>
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">آخر تسجيل دخول</label>
                                    <p id="profileLastLogin" style="margin: 0; color: #274060;">جاري التحميل...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بطاقة البيانات التفصيلية -->
                <div class="card" style="margin-bottom: 2rem;" id="memberDetailsCard">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-id-card"></i>
                            البيانات التفصيلية
                        </h3>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">رقم الهوية الوطنية</label>
                                <p id="profileNationalId" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">الرقم الأكاديمي</label>
                                <p id="profileAcademicRecord" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">تاريخ الميلاد</label>
                                <p id="profileBirthDate" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">الدرجة الأكاديمية</label>
                                <p id="profileAcademicDegree" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">الكلية</label>
                                <p id="profileCollege" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">التخصص</label>
                                <p id="profileMajor" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                            <div>
                                <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">اللجنة</label>
                                <p id="profileCommittee" style="margin: 0; color: #274060;">غير محدد</p>
                            </div>
                        </div>
                        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
                            <h4 style="margin: 0 0 1rem 0; color: #274060; font-size: 0.95rem;">
                                <i class="fa-solid fa-share-nodes"></i>
                                حسابات التواصل الاجتماعي
                            </h4>
                            <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">
                                        <i class="fa-brands fa-twitter"></i> تويتر
                                    </label>
                                    <p id="profileTwitter" style="margin: 0; color: #274060;">غير محدد</p>
                                </div>
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">
                                        <i class="fa-brands fa-instagram"></i> إنستقرام
                                    </label>
                                    <p id="profileInstagram" style="margin: 0; color: #274060;">غير محدد</p>
                                </div>
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">
                                        <i class="fa-brands fa-tiktok"></i> تيك توك
                                    </label>
                                    <p id="profileTiktok" style="margin: 0; color: #274060;">غير محدد</p>
                                </div>
                                <div>
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.25rem; display: block;">
                                        <i class="fa-brands fa-linkedin"></i> لينكد إن
                                    </label>
                                    <p id="profileLinkedin" style="margin: 0; color: #274060;">غير محدد</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بطاقة النشاط -->
                <div class="card">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-chart-line"></i>
                            النشاط الأخير
                        </h3>
                    </div>
                    <div class="card-body">
                        <div id="recentActivityContainer" style="max-height: 400px; overflow-y: auto;">
                            <p style="text-align: center; color: #64748b; padding: 2rem;">جاري تحميل النشاط...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم لجنتي -->
            <section id="my-committee-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-users"></i>
                        لجنتي
                    </h1>
                    <p class="section-subtitle">معلومات عن لجنتك ورابط الانضمام</p>
                </div>

                <div class="card" id="committeeInfoCard">
                    <div class="card-body">
                        <div style="display: grid; gap: 1.5rem;">
                            <div style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
                                <i class="fa-solid fa-users" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.9;"></i>
                                <h2 id="myCommitteeNameDisplay" style="margin: 0; font-size: 1.75rem; font-weight: bold;">جاري التحميل...</h2>
                            </div>
                            <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                                <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-right: 3px solid #667eea;">
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem; display: block;">
                                        <i class="fa-solid fa-info-circle"></i> تعريف اللجنة
                                    </label>
                                    <p id="myCommitteeDescription" style="margin: 0; color: #274060; line-height: 1.6;">جاري التحميل...</p>
                                </div>
                                <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-right: 3px solid #10b981;">
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem; display: block;">
                                        <i class="fa-solid fa-user-tie"></i> قائد اللجنة
                                    </label>
                                    <p id="myCommitteeLeader" style="margin: 0; color: #274060;">جاري التحميل...</p>
                                </div>
                                <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-right: 3px solid #f59e0b;">
                                    <label style="font-weight: bold; color: #64748b; font-size: 0.875rem; margin-bottom: 0.5rem; display: block;">
                                        <i class="fa-solid fa-users-line"></i> عدد الأعضاء
                                    </label>
                                    <p id="myCommitteeMembersCount" style="margin: 0; color: #274060; font-size: 1.5rem; font-weight: bold;">0</p>
                                </div>
                            </div>
                            
                            <!-- رابط الانضمام للقروب -->
                            <div id="myCommitteeGroupLinkContainer" style="padding: 1.5rem; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 12px; text-align: center; display: none;">
                                <h3 style="margin: 0 0 1rem 0; color: white; font-size: 1.25rem;">
                                    <i class="fa-brands fa-whatsapp"></i>
                                    انضم إلى قروب اللجنة
                                </h3>
                                <a id="myCommitteeGroupLink" href="#" target="_blank" class="btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem; background: white; color: #10b981; padding: 0.75rem 2rem; border-radius: 8px; text-decoration: none; font-weight: bold; transition: all 0.3s ease;">
                                    <i class="fa-brands fa-whatsapp" style="font-size: 1.5rem;"></i>
                                    <span>افتح الرابط</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم إدارة الإشعارات - لرئيس النادي فقط -->
            <section id="send-notifications-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-paper-plane"></i>
                        إدارة الإشعارات
                    </h1>
                    <p class="section-subtitle">إرسال إشعارات للأعضاء والمستخدمين</p>
                </div>

                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-bell-plus"></i>
                            إرسال إشعار جديد
                        </h3>
                    </div>
                    <div class="card-body">
                        <form id="sendNotificationForm">
                            <div style="display: grid; gap: 1.5rem;">
                                <div class="form-group">
                                    <label>عنوان الإشعار <span style="color: #ef4444;">*</span></label>
                                    <input type="text" name="title" required placeholder="عنوان واضح ومختصر" maxlength="100">
                                </div>
                                <div class="form-group">
                                    <label>نص الإشعار <span style="color: #ef4444;">*</span></label>
                                    <textarea name="message" required placeholder="اكتب رسالة الإشعار هنا..." rows="4" maxlength="500"></textarea>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <div class="form-group">
                                        <label>نوع الإشعار</label>
                                        <select name="type" required>
                                            <option value="info">معلومة</option>
                                            <option value="announcement">إعلان</option>
                                            <option value="success">نجاح</option>
                                            <option value="warning">تحذير</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>الأولوية</label>
                                        <select name="priority" required>
                                            <option value="normal">عادية</option>
                                            <option value="high">عالية</option>
                                            <option value="urgent">عاجلة</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>الجمهور المستهدف</label>
                                    <select name="targetAudience" id="targetAudience" required>
                                        <option value="all">جميع المستخدمين</option>
                                        <option value="members">الأعضاء فقط</option>
                                        <option value="committee_leaders">قادة اللجان</option>
                                        <option value="specific_committee">لجنة محددة</option>
                                    </select>
                                </div>
                                <div class="form-group" id="committeeSelectGroup" style="display: none;">
                                    <label>اللجنة المستهدفة</label>
                                    <select name="targetCommittee" id="targetCommittee">
                                        <option value="">اختر اللجنة</option>
                                    </select>
                                </div>
                                <div style="padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                    <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer;">
                                        <input type="checkbox" name="enablePush" checked style="width: 20px; height: 20px;">
                                        <span>إرسال إشعار Push للأجهزة</span>
                                    </label>
                                </div>
                            </div>
                            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: flex-end;">
                                <button type="reset" class="btn-outline">إعادة تعيين</button>
                                <button type="button" class="btn-primary" id="sendNotificationBtn">
                                    <i class="fa-solid fa-paper-plane"></i>
                                    إرسال الإشعار
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-clock-rotate-left"></i>
                            سجل الإشعارات المرسلة
                        </h3>
                        <button class="btn-outline btn-sm" id="refreshHistoryBtn">
                            <i class="fa-solid fa-rotate"></i>
                            تحديث
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="notificationsHistoryList" style="max-height: 600px; overflow-y: auto;">
                            <!-- سيتم ملؤه ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم بطاقة العضوية -->
            <section id="membership-card-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-id-badge"></i>
                        بطاقة العضوية
                    </h1>
                    <p class="section-subtitle">بطاقة عضويتك في نادي أدِيب</p>
                </div>

                <div class="card">
                    <div class="card-body" style="display: flex; justify-content: center; padding: 2rem;">
                        <div id="membershipCard" style="width: 100%; max-width: 450px; background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%); border-radius: 16px; padding: 2rem; box-shadow: 0 20px 60px rgba(0,0,0,0.3); position: relative; overflow: hidden;">
                            <div style="position: absolute; top: -50px; right: -50px; width: 200px; height: 200px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
                            <div style="position: absolute; bottom: -30px; left: -30px; width: 150px; height: 150px; background: rgba(255,255,255,0.1); border-radius: 50%;"></div>
                            
                            <div style="position: relative; z-index: 1;">
                                <div style="text-align: center; margin-bottom: 1.5rem;">
                                    <img src="https://lh3.googleusercontent.com/d/195w-tUBF_VKwFOm3Sh06fmwnlYzIyw0e" alt="شعار أدِيب" style="width: 8rem; filter: brightness(0) invert(1);">
                                    <h2 style="margin: 0.5rem 0 0 0; color: white; font-size: 1.5rem; font-weight: bold;">نادي أدِيب</h2>
                                </div>

                                <div style="text-align: center; margin-bottom: 1.5rem;">
                                    <img id="cardAvatar" src="" alt="صورة العضو" style="width: 100px; height: 100px; border-radius: 50%; border: 4px solid white; object-fit: cover;">
                                </div>

                                <div style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 12px; padding: 1.5rem; color: white;">
                                    <div style="margin-bottom: 1rem;">
                                        <label style="font-size: 0.75rem; opacity: 0.8; display: block; margin-bottom: 0.25rem;">الاسم الكامل</label>
                                        <p id="cardFullName" style="margin: 0; font-size: 1.25rem; font-weight: bold;">جاري التحميل...</p>
                                    </div>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                        <div>
                                            <label style="font-size: 0.75rem; opacity: 0.8; display: block; margin-bottom: 0.25rem;">رقم الهوية</label>
                                            <p id="cardNationalId" style="margin: 0; font-size: 0.95rem; font-weight: 600;">**********</p>
                                        </div>
                                        <div>
                                            <label style="font-size: 0.75rem; opacity: 0.8; display: block; margin-bottom: 0.25rem;">الرقم الأكاديمي</label>
                                            <p id="cardAcademicRecord" style="margin: 0; font-size: 0.95rem; font-weight: 600;">**********</p>
                                        </div>
                                    </div>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                        <div>
                                            <label style="font-size: 0.75rem; opacity: 0.8; display: block; margin-bottom: 0.25rem;">الدور</label>
                                            <p id="cardRole" style="margin: 0; font-size: 0.9rem; font-weight: 600;">جاري التحميل...</p>
                                        </div>
                                        <div>
                                            <label style="font-size: 0.75rem; opacity: 0.8; display: block; margin-bottom: 0.25rem;">تاريخ الانضمام</label>
                                            <p id="cardJoinDate" style="margin: 0; font-size: 0.9rem; font-weight: 600;">جاري التحميل...</p>
                                        </div>
                                    </div>
                                </div>

                                <div style="text-align: center; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.2);">
                                    <p style="margin: 0; font-size: 0.75rem; color: rgba(255,255,255,0.8);">رقم العضوية: <span id="cardMemberId" style="font-weight: bold;">---</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم الإعدادات -->
            <section id="settings-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-sliders"></i>
                        الإعدادات
                    </h1>
                    <p class="section-subtitle">إعدادات التطبيق والتفضيلات الشخصية</p>
                </div>

                <!-- إعدادات الإشعارات -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-bell"></i>
                            الإشعارات
                        </h3>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 1.5rem;">
                            <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-right: 3px solid #10b981;">
                                <label style="font-weight: bold; color: #274060; margin-bottom: 0.75rem; display: block;">
                                    <i class="fa-solid fa-envelope"></i> إشعارات البريد الإلكتروني
                                </label>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <label class="switch">
                                        <input type="checkbox" id="emailNotificationsToggle" checked>
                                        <span class="slider"></span>
                                    </label>
                                    <span style="color: #64748b; font-size: 0.875rem;">قريباً - قيد التطوير</span>
                                </div>
                            </div>
                            
                            <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border-right: 3px solid #f59e0b;">
                                <label style="font-weight: bold; color: #274060; margin-bottom: 0.75rem; display: block;">
                                    <i class="fa-solid fa-browser"></i> إشعارات المتصفح
                                </label>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <label class="switch">
                                        <input type="checkbox" id="browserNotificationsToggle">
                                        <span class="slider"></span>
                                    </label>
                                    <span style="color: #64748b; font-size: 0.875rem;">قريباً - قيد التطوير</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- تثبيت التطبيق PWA -->
                <div class="card">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-mobile-screen-button"></i>
                            تطبيق نادي أدِيب
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="pwa-install-container">
                            <div class="pwa-install-hero">
                                <div class="pwa-install-icon">
                                    <i class="fa-solid fa-mobile-screen-button"></i>
                                </div>
                                <h3>ثبّت تطبيق نادي أدِيب</h3>
                                <p>استمتع بتجربة أسرع وأفضل مع التطبيق على جهازك</p>
                            </div>

                            <div class="pwa-features-grid">
                                <div class="pwa-feature">
                                    <div class="pwa-feature-icon">
                                        <i class="fa-solid fa-bolt"></i>
                                    </div>
                                    <h4>سريع وخفيف</h4>
                                    <p>تحميل فوري وأداء ممتاز</p>
                                </div>
                                <div class="pwa-feature">
                                    <div class="pwa-feature-icon">
                                        <i class="fa-solid fa-wifi"></i>
                                    </div>
                                    <h4>يعمل بدون إنترنت</h4>
                                    <p>تصفح المحتوى حتى بدون اتصال</p>
                                </div>
                                <div class="pwa-feature">
                                    <div class="pwa-feature-icon">
                                        <i class="fa-solid fa-bell"></i>
                                    </div>
                                    <h4>إشعارات فورية</h4>
                                    <p>احصل على التحديثات مباشرة</p>
                                </div>
                                <div class="pwa-feature">
                                    <div class="pwa-feature-icon">
                                        <i class="fa-solid fa-download"></i>
                                    </div>
                                    <h4>بدون متجر</h4>
                                    <p>تثبيت مباشر من المتصفح</p>
                                </div>
                            </div>

                            <button id="pwaInstallBtn" class="pwa-install-btn" style="display: none;">
                                <i class="fa-solid fa-download"></i>
                                <span>ثبّت التطبيق الآن</span>
                            </button>

                            <div id="pwaInstalledMessage" class="pwa-installed-message" style="display: none;">
                                <i class="fa-solid fa-check-circle"></i>
                                <span>التطبيق مثبت بالفعل على جهازك!</span>
                            </div>

                            <div class="pwa-info-box">
                                <i class="fa-solid fa-info-circle"></i>
                                <div>
                                    <strong>كيفية التثبيت:</strong>
                                    <p>انقر على زر "ثبّت التطبيق" أعلاه، أو استخدم قائمة المتصفح واختر "تثبيت التطبيق" أو "إضافة إلى الشاشة الرئيسية"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم إدارة الصلاحيات -->
            <section id="permissions-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-shield-halved"></i>
                        إدارة الصلاحيات
                    </h1>
                    <p class="section-subtitle">النظام المركزي لإدارة جميع الصلاحيات</p>
                </div>

                <!-- إحصائيات الصلاحيات -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card" style="--stat-color: #3b82f6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-key"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalPermissionsCount">0</div>
                                <div class="stat-label">إجمالي الصلاحيات</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #10b981">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-user-shield"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalRolesCount">0</div>
                                <div class="stat-label">الأدوار النشطة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #8b5cf6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-layer-group"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalModulesCount">0</div>
                                <div class="stat-label">الأقسام</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #f59e0b">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-user-tag"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalUserPermsCount">0</div>
                                <div class="stat-label">صلاحيات خاصة</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- تبويبات الصلاحيات -->
                <div class="tabs-container">
                    <div class="tabs-nav">
                        <button class="tab-btn active" data-tab="permissions-list">
                            <i class="fa-solid fa-list"></i>
                            قائمة الصلاحيات
                        </button>
                        <button class="tab-btn" data-tab="role-permissions">
                            <i class="fa-solid fa-user-shield"></i>
                            صلاحيات الأدوار
                        </button>
                        <button class="tab-btn" data-tab="user-permissions">
                            <i class="fa-solid fa-user-tag"></i>
                            صلاحيات المستخدمين
                        </button>
                        <button class="tab-btn" data-tab="audit-log">
                            <i class="fa-solid fa-history"></i>
                            سجل التدقيق
                        </button>
                    </div>

                    <!-- محتوى التبويبات -->
                    <div class="tabs-content">
                        <!-- قائمة الصلاحيات -->
                        <div id="permissions-list" class="tab-content active">
                            <div class="card">
                                <div class="card-header">
                                    <h3>جميع الصلاحيات المتاحة</h3>
                                    <div class="filters-bar" style="margin: 0;">
                                        <select id="moduleFilterPermissions" class="filter-select">
                                            <option value="">جميع الأقسام</option>
                                        </select>
                                        <div class="filter-group">
                                            <i class="fa-solid fa-search"></i>
                                            <input type="text" id="searchPermissionsInput" placeholder="البحث..." />
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="permissionsListTable" class="data-table">
                                        <!-- سيتم ملؤها ديناميكياً -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- صلاحيات الأدوار -->
                        <div id="role-permissions" class="tab-content">
                            <div class="card">
                                <div class="card-header">
                                    <h3>إدارة صلاحيات الأدوار</h3>
                                    <select id="roleSelectPermissions" class="filter-select">
                                        <option value="">اختر الدور...</option>
                                    </select>
                                </div>
                                <div class="card-body">
                                    <div id="rolePermissionsContent">
                                        <p class="text-muted text-center">اختر دوراً لعرض وتعديل صلاحياته</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- صلاحيات المستخدمين -->
                        <div id="user-permissions" class="tab-content">
                            <div class="card">
                                <div class="card-header">
                                    <h3>الصلاحيات الخاصة للمستخدمين</h3>
                                    <button class="btn-primary" id="addUserPermissionBtn">
                                        <i class="fa-solid fa-plus"></i>
                                        إضافة صلاحية خاصة
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="userPermissionsTable" class="data-table">
                                        <!-- سيتم ملؤها ديناميكياً -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- سجل التدقيق -->
                        <div id="audit-log" class="tab-content">
                            <div class="card">
                                <div class="card-header">
                                    <h3>سجل تغييرات الصلاحيات</h3>
                                    <div class="filters-bar" style="margin: 0;">
                                        <select id="actionTypeFilterAudit" class="filter-select">
                                            <option value="">جميع الإجراءات</option>
                                            <option value="grant">منح</option>
                                            <option value="revoke">إلغاء</option>
                                            <option value="modify">تعديل</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="auditLogTable" class="data-table">
                                        <!-- سيتم ملؤها ديناميكياً -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <!-- قسم إدارة رسائل التواصل -->
            <section id="contact-messages-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-envelope"></i>
                        رسائل التواصل
                    </h1>
                    <p class="section-subtitle">إدارة رسائل التواصل الواردة من الموقع</p>
                </div>

                <!-- إحصائيات الرسائل -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card" style="--stat-color: #3b82f6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-envelope"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="newMessagesCount">0</div>
                                <div class="stat-label">رسائل جديدة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #10b981">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-envelope-open"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="readMessagesCount">0</div>
                                <div class="stat-label">رسائل مقروءة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #8b5cf6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-reply"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="repliedMessagesCount">0</div>
                                <div class="stat-label">تم الرد عليها</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #6b7280">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-box-archive"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="archivedMessagesCount">0</div>
                                <div class="stat-label">مؤرشفة</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="messageSearchInput" placeholder="البحث في الرسائل..." />
                    </div>
                    <select id="messageStatusFilter" class="filter-select">
                        <option value="">جميع الحالات</option>
                        <option value="new">جديدة</option>
                        <option value="read">مقروءة</option>
                        <option value="replied">تم الرد</option>
                        <option value="archived">مؤرشفة</option>
                    </select>
                    <select id="messagePriorityFilter" class="filter-select">
                        <option value="">جميع الأولويات</option>
                        <option value="urgent">عاجل</option>
                        <option value="high">عالي</option>
                        <option value="normal">عادي</option>
                        <option value="low">منخفض</option>
                    </select>
                    <button class="btn-primary" id="refreshMessagesBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                </div>

                <!-- جدول الرسائل -->
                <div class="card">
                    <div class="card-body">
                        <div id="contactMessagesTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم إدارة مشتركي النشرة البريدية -->
            <section id="newsletter-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-envelope-open-text"></i>
                        مشتركو النشرة البريدية
                    </h1>
                    <p class="section-subtitle">إدارة المشتركين في النشرة البريدية</p>
                </div>

                <!-- إحصائيات المشتركين -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card" style="--stat-color: #3b82f6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalSubscribersCount">0</div>
                                <div class="stat-label">إجمالي المشتركين</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #10b981">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-user-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="activeSubscribersCount">0</div>
                                <div class="stat-label">مشتركون نشطون</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #ef4444">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-user-xmark"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="unsubscribedCount">0</div>
                                <div class="stat-label">ألغوا الاشتراك</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #8b5cf6">
                        <div class="stat-badge"><i class="fa-solid fa-calendar"></i> هذا الشهر</div>
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-calendar-plus"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="thisMonthSubscribersCount">0</div>
                                <div class="stat-label">اشتراكات هذا الشهر</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="subscriberSearchInput" placeholder="البحث في المشتركين..." />
                    </div>
                    <select id="subscriberStatusFilter" class="filter-select">
                        <option value="">جميع الحالات</option>
                        <option value="active">نشط</option>
                        <option value="unsubscribed">ألغى الاشتراك</option>
                        <option value="bounced">بريد غير صالح</option>
                    </select>
                    <button class="btn-primary" id="refreshSubscribersBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-success" id="exportSubscribersBtn">
                        <i class="fa-solid fa-file-export"></i>
                        تصدير
                    </button>
                </div>

                <!-- جدول المشتركين -->
                <div class="card">
                    <div class="card-body">
                        <div id="subscribersTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم إعدادات التسجيل -->
            <section id="membership-settings-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-gear"></i>
                        إعدادات التسجيل
                    </h1>
                    <p class="section-subtitle">التحكم في باب التسجيل والجدولة التلقائية</p>
                </div>

                <!-- بطاقة التحكم في التسجيل -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-toggle-on"></i>
                            التحكم في باب التسجيل
                        </h3>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 1.5rem;">
                            <!-- التحكم اليدوي -->
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="joinOpenToggle" style="width: auto;" />
                                    <span style="font-weight: bold;">فتح باب التسجيل</span>
                                </label>
                                <small style="color: #64748b; margin-top: 0.25rem; display: block;">
                                    عند التفعيل، يمكن للزوار التسجيل في العضوية
                                </small>
                            </div>

                            <!-- العد التنازلي -->
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="countdownToggle" style="width: auto;" />
                                    <span style="font-weight: bold;">إظهار العد التنازلي</span>
                                </label>
                                <small style="color: #64748b; margin-top: 0.25rem; display: block;">
                                    عرض مؤقت العد التنازلي لإغلاق التسجيل في صفحة التسجيل
                                </small>
                            </div>

                            <!-- الجدولة التلقائية -->
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="scheduleToggle" style="width: auto;" />
                                    <span style="font-weight: bold;">تفعيل الجدولة التلقائية</span>
                                </label>
                                <small style="color: #64748b; margin-top: 0.25rem; display: block;">
                                    فتح وإغلاق التسجيل تلقائياً حسب التواريخ المحددة
                                </small>
                            </div>

                            <!-- إعدادات الجدولة -->
                            <div id="scheduleSettings"
                                style="display: none; padding: 1rem; background: #f8fafc; border-radius: 8px; border-right: 3px solid #3b82f6;">
                                <div style="display: grid; gap: 1rem;">
                                    <div class="form-group">
                                        <label>نمط الجدولة</label>
                                        <select id="scheduleMode" class="filter-select">
                                            <option value="range">نطاق زمني (فتح وإغلاق)</option>
                                            <option value="open_only">فتح فقط</option>
                                            <option value="close_only">إغلاق فقط</option>
                                        </select>
                                    </div>
                                    <div class="form-group" id="openDateGroup">
                                        <label>تاريخ ووقت الفتح</label>
                                        <input type="datetime-local" id="scheduleOpenAt" />
                                    </div>
                                    <div class="form-group" id="closeDateGroup">
                                        <label>تاريخ ووقت الإغلاق</label>
                                        <input type="datetime-local" id="scheduleCloseAt" />
                                    </div>
                                </div>
                            </div>

                            <!-- زر الحفظ -->
                            <div style="display: flex; gap: 0.75rem; justify-content: flex-start;">
                                <button type="button" class="btn-primary" id="saveMembershipSettings">
                                    <i class="fa-solid fa-save"></i>
                                    حفظ الإعدادات
                                </button>
                                <button type="button" class="btn-outline" id="resetMembershipSettings">
                                    <i class="fa-solid fa-rotate-left"></i>
                                    إعادة تعيين
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- بطاقة أرشفة التسجيل -->
                <div class="card">
                    <div class="card-header">
                        <h3>
                            <i class="fa-solid fa-box-archive"></i>
                            أرشفة التسجيل الحالي
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning" style="background: #fef3c7; border-right: 4px solid #f59e0b; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                            <i class="fa-solid fa-exclamation-triangle" style="color: #f59e0b;"></i>
                            <strong>تحذير:</strong> الأرشفة ستنقل جميع البيانات الحالية إلى الأرشيف وتحذفها من الأقسام، 
                            مما يجعل النظام جاهزاً لدورة تسجيل جديدة.
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.5rem;">الطلبات الحالية</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: #3b82f6;" id="currentApplicationsCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.5rem;">المقابلات الحالية</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: #8b5cf6;" id="currentInterviewsCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.5rem;">الجلسات الحالية</div>
                                <div style="font-size: 1.5rem; font-weight: bold; color: #10b981;" id="currentSessionsCount">0</div>
                            </div>
                        </div>
                        
                        <button 
                            class="btn btn-danger" 
                            onclick="archiveMembershipCycle()"
                            style="width: 100%; background: #ef4444; border: none; padding: 0.875rem; font-size: 1rem; font-weight: 600; cursor: pointer; border-radius: 8px; color: white; transition: all 0.3s ease;">
                            <i class="fa-solid fa-box-archive"></i>
                            أرشفة التسجيل الحالي
                        </button>
                    </div>
                </div>
            </section>

            <!-- قسم اللجان المتاحة للتسجيل -->
            <section id="membership-committees-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-users-gear"></i>
                        اللجان المتاحة للتسجيل
                    </h1>
                    <p class="section-subtitle">تحكم في اللجان التي تظهر في نموذج التسجيل</p>
                </div>

                <!-- بطاقة إدارة اللجان المتاحة -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="card-body">
                        <p style="color: #64748b; margin-bottom: 1.5rem;">
                            <i class="fa-solid fa-info-circle"></i>
                            تحكم في اللجان التي تظهر في نموذج التسجيل. يتم عرض الأسماء والأوصاف من إدارة اللجان.
                        </p>
                        <div id="availableCommitteesTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم دعوات التسجيل -->
            <section id="membership-invitations-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-envelope-open-text"></i>
                        دعوات التسجيل
                    </h1>
                    <p class="section-subtitle">إنشاء وإدارة دعوات التسجيل الفردية</p>
                </div>

                <!-- إحصائيات الدعوات -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card" style="--stat-color: #3b82f6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-envelope"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalInvitationsCount">0</div>
                                <div class="stat-label">إجمالي الدعوات</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #10b981">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="activeInvitationsCount">0</div>
                                <div class="stat-label">دعوات نشطة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #8b5cf6">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-user-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="usedInvitationsCount">0</div>
                                <div class="stat-label">دعوات مستخدمة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #f59e0b">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="expiredInvitationsCount">0</div>
                                <div class="stat-label">دعوات منتهية</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- أزرار الإجراءات -->
                <div class="filters-bar">
                    <button class="btn-primary" id="createInvitationBtn">
                        <i class="fa-solid fa-plus"></i>
                        إنشاء دعوة جديدة
                    </button>
                    <select id="invitationStatusFilter" class="filter-select">
                        <option value="">جميع الحالات</option>
                        <option value="active">نشطة</option>
                        <option value="used">مستخدمة</option>
                        <option value="expired">منتهية</option>
                        <option value="cancelled">ملغاة</option>
                    </select>
                    <button class="btn-outline" id="refreshInvitationsBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-success" id="exportInvitationsBtn">
                        <i class="fa-solid fa-file-export"></i>
                        تصدير
                    </button>
                </div>

                <!-- جدول الدعوات -->
                <div class="card">
                    <div class="card-body">
                        <div id="invitationsTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم طلبات العضوية (عرض فقط) -->
            <section id="membership-applications-view-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-eye"></i>
                        طلبات العضوية
                    </h1>
                    <p class="section-subtitle">عرض طلبات التسجيل والإحصائيات</p>
                </div>

                <!-- إحصائيات الطلبات حسب اللجان -->
                <div class="stats-grid" style="margin-bottom: 2rem;" id="applicationsCommitteesStats">
                    <!-- سيتم ملؤها ديناميكياً بإحصائيات اللجان -->
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="applicationSearchInput" placeholder="البحث في الطلبات..." />
                    </div>
                    <select id="applicationCommitteeFilter" class="filter-select">
                        <option value="">جميع اللجان</option>
                        <!-- سيتم ملؤها ديناميكياً من اللجان الفعلية -->
                    </select>
                    <button class="btn-primary" id="refreshApplicationsBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-success" id="exportApplicationsBtn">
                        <i class="fa-solid fa-file-export"></i>
                        تصدير
                    </button>
                </div>

                <!-- جدول الطلبات (عرض فقط) -->
                <div class="card">
                    <div class="card-body">
                        <div id="applicationsViewTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم مراجعة الطلبات (مع الإجراءات) -->
            <section id="membership-applications-review-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-clipboard-check"></i>
                        مراجعة الطلبات
                    </h1>
                    <p class="section-subtitle">قبول ورفض طلبات التسجيل</p>
                </div>

                <!-- إحصائيات الطلبات حسب اللجان -->
                <div class="stats-grid" style="margin-bottom: 2rem;" id="applicationsReviewCommitteesStats">
                    <!-- سيتم ملؤها ديناميكياً بإحصائيات اللجان -->
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="applicationReviewSearchInput" placeholder="البحث في الطلبات..." />
                    </div>
                    <select id="applicationReviewStatusFilter" class="filter-select">
                        <option value="">جميع الحالات</option>
                        <option value="approved_for_interview">مقبول للمقابلة</option>
                        <option value="rejected">مرفوض</option>
                        <option value="under_review">قيد المراجعة</option>
                        <option value="new">جديد</option>
                    </select>
                    <select id="applicationReviewCommitteeFilter" class="filter-select">
                        <option value="">جميع اللجان</option>
                        <!-- سيتم ملؤها ديناميكياً من اللجان الفعلية -->
                    </select>
                    <button class="btn-primary" id="refreshApplicationsReviewBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-success" id="exportApplicationsReviewBtn">
                        <i class="fa-solid fa-file-export"></i>
                        تصدير
                    </button>
                </div>

                <!-- جدول الطلبات (مع أزرار الإجراءات) -->
                <div class="card">
                    <div class="card-body">
                        <div id="applicationsReviewTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم المقابلات -->
            <section id="membership-interviews-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-calendar-days"></i>
                        المقابلات
                    </h1>
                    <p class="section-subtitle">إدارة وجدولة مقابلات المتقدمين</p>
                </div>

                <!-- إحصائيات المقابلات -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card" style="--stat-color: #10b981">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="scheduledInterviewsCount">0</div>
                                <div class="stat-label">مقابلات مجدولة</div>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card" style="--stat-color: #ef4444">
                        <div class="stat-card-wrapper">
                            <div class="stat-icon">
                                <i class="fa-solid fa-calendar-xmark"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="unscheduledInterviewsCount">0</div>
                                <div class="stat-label">غير مجدولة</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- أزرار الإجراءات والفلاتر -->
                <div class="filters-bar">
                    <button class="btn-primary" id="scheduleNewInterviewBtn">
                        <i class="fa-solid fa-plus"></i>
                        جدولة مقابلة جديدة
                    </button>
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="interviewsSearchInput" placeholder="البحث بالاسم..." />
                    </div>
                    <select id="interviewsSessionFilter" class="filter-select">
                        <option value="">جميع الجلسات</option>
                        <!-- سيتم ملؤها ديناميكياً -->
                    </select>
                    <select id="interviewsSortFilter" class="filter-select">
                        <option value="nearest">الأقرب أولاً</option>
                        <option value="farthest">الأبعد أولاً</option>
                    </select>
                    <button class="btn-outline" id="refreshInterviewsBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                </div>

                <!-- جدول المقابلات -->
                <div class="card">
                    <div class="card-body">
                        <div id="interviewsTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <section id="membership-barzakh-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-hourglass-half"></i>
                        البرزخ
                    </h1>
                    <p class="section-subtitle">المقبولين للمقابلة بدون موعد مقابلة مجدول</p>
                </div>

                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <i class="fa-solid fa-user-clock stat-icon" style="color: #f59e0b;"></i>
                        <div class="stat-info">
                            <h3>بانتظار جدولة المقابلة</h3>
                            <p class="stat-value" id="barzakhCount">0</p>
                        </div>
                    </div>
                </div>

                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="barzakhSearchInput" placeholder="البحث بالاسم أو البريد..." />
                    </div>
                    <select id="barzakhCommitteeFilter" class="filter-select">
                        <option value="">جميع اللجان</option>
                    </select>
                    <button class="btn-outline" id="refreshBarzakhBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-success" id="exportBarzakhBtn">
                        <i class="fa-solid fa-file-export"></i>
                        تصدير
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div id="barzakhTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم نتائج العضوية -->
            <section id="membership-accepted-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-clipboard-check"></i>
                        نتائج العضوية
                    </h1>
                    <p class="section-subtitle">عرض المتقدمين المقبولين والمرفوضين</p>
                </div>

                <!-- إحصائيات نتائج العضوية -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <i class="fa-solid fa-clipboard-list stat-icon" style="color: #3b82f6;"></i>
                        <div class="stat-info">
                            <h3>إجمالي القرارات</h3>
                            <p class="stat-value" id="totalDecisionsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-user-check stat-icon" style="color: #10b981;"></i>
                        <div class="stat-info">
                            <h3>مقبولين</h3>
                            <p class="stat-value" id="acceptedDecisionsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-user-times stat-icon" style="color: #ef4444;"></i>
                        <div class="stat-info">
                            <h3>مرفوضين</h3>
                            <p class="stat-value" id="rejectedDecisionsCount">0</p>
                        </div>
                    </div>
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="decisionsSearchInput" placeholder="البحث بالاسم أو البريد..." />
                    </div>
                    <select id="decisionsStatusFilter" class="filter-select">
                        <option value="">جميع القرارات</option>
                        <option value="accepted">مقبول نهائياً</option>
                        <option value="rejected">مرفوض نهائياً</option>
                    </select>
                    <select id="decisionsCommitteeFilter" class="filter-select">
                        <option value="">جميع اللجان</option>
                    </select>
                    <button class="btn-outline" id="refreshDecisionsBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-success" id="exportDecisionsBtn">
                        <i class="fa-solid fa-file-export"></i>
                        تصدير
                    </button>
                </div>

                <!-- جدول نتائج العضوية -->
                <div class="card">
                    <div class="card-body">
                        <div id="decisionsTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم ترحيل المقبولين -->
            <section id="member-migration-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-users-gear"></i>
                        ترحيل المقبولين إلى حسابات
                    </h1>
                    <p class="section-subtitle">ترحيل الأعضاء المقبولين من نتائج العضوية إلى حسابات مستخدمين حقيقية</p>
                </div>

                <!-- إحصائيات الترحيل -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <i class="fa-solid fa-user-check stat-icon" style="color: #10b981;"></i>
                        <div class="stat-info">
                            <h3>إجمالي المقبولين</h3>
                            <p class="stat-value" id="totalAcceptedCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-clock stat-icon" style="color: #f59e0b;"></i>
                        <div class="stat-info">
                            <h3>بانتظار الترحيل</h3>
                            <p class="stat-value" id="pendingMigrationCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-user-plus stat-icon" style="color: #3b82f6;"></i>
                        <div class="stat-info">
                            <h3>تم ترحيلهم</h3>
                            <p class="stat-value" id="migratedCount">0</p>
                        </div>
                    </div>
                </div>

                <!-- فلاتر البحث -->
                <div class="filters-bar">
                    <div class="filter-group">
                        <i class="fa-solid fa-search"></i>
                        <input type="text" id="migrationSearchInput" placeholder="البحث بالاسم أو البريد..." />
                    </div>
                    <select id="migrationCommitteeFilter" class="filter-select">
                        <option value="">جميع اللجان</option>
                    </select>
                    <button class="btn-outline" id="refreshMigrationBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                    <button class="btn-primary" id="exportMigrationBtn">
                        <i class="fa-solid fa-file-excel"></i>
                        تصدير Excel
                    </button>
                </div>

                <!-- تعليمات الاستخدام -->
                <div class="card" style="margin-bottom: 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <div class="card-body">
                        <h3 style="color: white; margin-bottom: 0.75rem;">
                            <i class="fa-solid fa-info-circle"></i>
                            كيفية استخدام نظام الترحيل
                        </h3>
                        <ul style="margin: 0; padding-right: 1.5rem; line-height: 1.8;">
                            <li>يعرض هذا القسم جميع الأعضاء المقبولين الذين لم يتم ترحيلهم بعد</li>
                            <li>يمكنك تعديل اللجنة لأي عضو قبل الترحيل من القائمة المنسدلة</li>
                            <li>عند الترحيل، سيتم إنشاء حساب جديد للعضو تلقائياً مع كلمة مرور مؤقتة</li>
                            <li>سيتم ربط العضو بدور "عضو عادي" واللجنة المحددة</li>
                            <li>يمكنك ترحيل عضو واحد أو مجموعة من الأعضاء دفعة واحدة</li>
                        </ul>
                    </div>
                </div>

                <!-- جدول الترحيل -->
                <div class="card">
                    <div class="card-body">
                        <div id="migrationTable" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم أرشيف التسجيل -->
            <section id="membership-archives-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-box-archive"></i>
                        أرشيف التسجيل
                    </h1>
                    <p class="section-subtitle">سجل تاريخي كامل لدورات التسجيل المؤرشفة</p>
                </div>

                <!-- إحصائيات الأرشيف -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <i class="fa-solid fa-folder-open stat-icon" style="color: #3b82f6;"></i>
                        <div class="stat-info">
                            <h3>الدورات المؤرشفة</h3>
                            <p class="stat-value" id="archivesCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-users stat-icon" style="color: #10b981;"></i>
                        <div class="stat-info">
                            <h3>إجمالي الطلبات</h3>
                            <p class="stat-value" id="totalArchivedApplications">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-user-check stat-icon" style="color: #8b5cf6;"></i>
                        <div class="stat-info">
                            <h3>إجمالي المقبولين</h3>
                            <p class="stat-value" id="totalAcceptedMembers">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-chart-line stat-icon" style="color: #f59e0b;"></i>
                        <div class="stat-info">
                            <h3>معدل القبول</h3>
                            <p class="stat-value" id="overallAcceptanceRate">0%</p>
                        </div>
                    </div>
                </div>

                <!-- أزرار الإجراءات -->
                <div class="filters-bar">
                    <button class="btn-outline" id="refreshArchivesBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                </div>

                <!-- قائمة الأرشيفات -->
                <div id="archivesTable">
                    <!-- سيتم ملؤها ديناميكياً -->
                </div>
            </section>

            <!-- قسم أعمالنا -->
            <section id="website-works-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-briefcase"></i>
                        أعمالنا
                    </h1>
                    <button class="btn-primary" id="addWorkBtn">
                        <i class="fa-solid fa-plus"></i>
                        إضافة عمل جديد
                    </button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div id="websiteWorksGrid" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم الإنجازات -->
            <section id="website-achievements-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-trophy"></i>
                        الإنجازات
                    </h1>
                    <button class="btn-primary" id="addAchievementBtn">
                        <i class="fa-solid fa-plus"></i>
                        إضافة إنجاز جديد
                    </button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div id="websiteAchievementsGrid" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم الشركاء -->
            <section id="website-sponsors-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-handshake"></i>
                        الشركاء
                    </h1>
                    <button class="btn-primary" id="addSponsorBtn">
                        <i class="fa-solid fa-plus"></i>
                        إضافة شريك جديد
                    </button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div id="websiteSponsorsGrid" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم الأسئلة الشائعة -->
            <section id="website-faq-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-circle-question"></i>
                        الأسئلة الشائعة
                    </h1>
                    <button class="btn-primary" id="addFaqBtn">
                        <i class="fa-solid fa-plus"></i>
                        إضافة سؤال جديد
                    </button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div id="websiteFaqGrid" class="data-table">
                            <!-- سيتم ملؤها ديناميكياً -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- قسم جلسات المقابلات -->
            <section id="interview-sessions-section" class="admin-section" style="display: none;">
                <div class="section-header">
                    <h1>
                        <i class="fa-solid fa-calendar-days"></i>
                        جلسات المقابلات
                    </h1>
                    <p class="section-subtitle">إدارة جلسات حجز المواعيد للمتقدمين</p>
                </div>

                <!-- إحصائيات الجلسات -->
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <i class="fa-solid fa-calendar-check stat-icon" style="color: #3b82f6;"></i>
                        <div class="stat-info">
                            <h3>جلسات نشطة</h3>
                            <p class="stat-value" id="activeSessionsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-calendar-xmark stat-icon" style="color: #64748b;"></i>
                        <div class="stat-info">
                            <h3>جلسات منتهية</h3>
                            <p class="stat-value" id="expiredSessionsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-clock stat-icon" style="color: #10b981;"></i>
                        <div class="stat-info">
                            <h3>إجمالي الفترات</h3>
                            <p class="stat-value" id="totalSlotsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-user-check stat-icon" style="color: #8b5cf6;"></i>
                        <div class="stat-info">
                            <h3>حجوزات مؤكدة</h3>
                            <p class="stat-value" id="bookedSlotsCount">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fa-solid fa-percentage stat-icon" style="color: #f59e0b;"></i>
                        <div class="stat-info">
                            <h3>نسبة الحجز</h3>
                            <p class="stat-value" id="bookingRate">0%</p>
                        </div>
                    </div>
                </div>

                <!-- أزرار الإجراءات -->
                <div class="filters-bar">
                    <button class="btn-primary" id="createSessionBtn">
                        <i class="fa-solid fa-plus"></i>
                        إنشاء جلسة جديدة
                    </button>
                    <button class="btn-outline" id="refreshSessionsBtn">
                        <i class="fa-solid fa-rotate"></i>
                        تحديث
                    </button>
                </div>

                <!-- جدول الجلسات -->
                <div class="card">
                    <div id="sessionsTable"></div>
                </div>
            </section>

        </main>
    </div>

    <!-- الطبقة الشفافة -->
    <div class="overlay" id="overlay"></div>


    <!-- نافذة إضافة/تعديل لجنة -->
    <div class="modal" id="committeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="committeeModalTitle">إضافة لجنة جديدة</h2>
                <button class="btn-icon" id="closeCommitteeModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="committeeForm" class="modal-body">
                <div class="form-group">
                    <label>اسم اللجنة *</label>
                    <input type="text" id="committeeNameAr" required />
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="committeeDescription" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label>رابط قروب اللجنة (WhatsApp/Telegram) *</label>
                    <input type="url" id="committeeGroupLink" placeholder="https://chat.whatsapp.com/..." required />
                    <small style="color: #64748b; display: block; margin-top: 0.5rem;">
                        <i class="fa-solid fa-info-circle"></i>
                        سيظهر هذا الرابط للأعضاء في تبويب "لجنتي" للانضمام إلى القروب
                    </small>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="committeeIsActive" checked />
                        لجنة نشطة
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline" id="cancelCommitteeBtn">إلغاء</button>
                    <button type="submit" class="btn-primary">
                        <i class="fa-solid fa-save"></i>
                        حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة إضافة/تعديل مستخدم -->
    <div class="modal" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="userModalTitle">إضافة مستخدم جديد</h2>
                <button class="btn-icon" id="closeUserModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="userForm" class="modal-body">
                <div class="form-group">
                    <label>الاسم الكامل *</label>
                    <input type="text" id="userFullName" required />
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني *</label>
                    <input type="email" id="userEmail" required />
                </div>
                <div class="form-group">
                    <label>رقم الهاتف</label>
                    <input type="tel" id="userPhone" />
                </div>
                <div class="form-group">
                    <label>الدور *</label>
                    <select id="userRoleSelect" required>
                        <option value="">اختر الدور</option>
                    </select>
                </div>
                <div class="form-group" id="committeeGroup" style="display: none;">
                    <label>اللجنة *</label>
                    <select id="userCommitteeSelect">
                        <option value="">اختر اللجنة</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>كلمة المرور *</label>
                    <input type="password" id="userPassword" required />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline" id="cancelUserBtn">إلغاء</button>
                    <button type="submit" class="btn-primary">
                        <i class="fa-solid fa-save"></i>
                        حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة إضافة/تعديل عمل -->
    <div class="modal" id="workModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="workModalTitle">إضافة عمل جديد</h2>
                <button class="btn-icon" id="closeWorkModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="workForm" class="modal-body">
                <div class="form-group">
                    <label>عنوان العمل *</label>
                    <input type="text" id="workTitle" required />
                </div>
                <div class="form-group">
                    <label>الفئة</label>
                    <input type="text" id="workCategory" placeholder="مثال: كتاب، مقال، فيديو" />
                </div>
                <div class="form-group">
                    <label>رابط الصورة *</label>
                    <input type="url" id="workImage" required placeholder="https://example.com/image.jpg" />
                </div>
                <div class="form-group">
                    <label>رابط العمل</label>
                    <input type="url" id="workLink" placeholder="https://example.com" />
                </div>
                <div class="form-group">
                    <label>الترتيب</label>
                    <input type="number" id="workOrder" min="0" placeholder="0" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline" id="cancelWorkBtn">إلغاء</button>
                    <button type="submit" class="btn-primary">
                        <i class="fa-solid fa-save"></i>
                        حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة إضافة/تعديل إنجاز -->
    <div class="modal" id="achievementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="achievementModalTitle">إضافة إنجاز جديد</h2>
                <button class="btn-icon" id="closeAchievementModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="achievementForm" class="modal-body">
                <div class="form-group">
                    <label>التسمية *</label>
                    <input type="text" id="achievementLabel" required placeholder="مثال: عدد الأعضاء" />
                </div>
                <div class="form-group">
                    <label>الرقم *</label>
                    <input type="number" id="achievementCount" required min="0" />
                </div>
                <div class="form-group">
                    <label>أيقونة Font Awesome *</label>
                    <input type="text" id="achievementIcon" required placeholder="fa-solid fa-trophy" />
                    <small>مثال: fa-solid fa-trophy, fa-solid fa-users</small>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="achievementPlus" checked />
                        إظهار علامة +
                    </label>
                </div>
                <div class="form-group">
                    <label>الترتيب</label>
                    <input type="number" id="achievementOrder" min="0" placeholder="0" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline" id="cancelAchievementBtn">إلغاء</button>
                    <button type="submit" class="btn-primary">
                        <i class="fa-solid fa-save"></i>
                        حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة إضافة/تعديل شريك -->
    <div class="modal" id="sponsorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="sponsorModalTitle">إضافة شريك جديد</h2>
                <button class="btn-icon" id="closeSponsorModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="sponsorForm" class="modal-body">
                <div class="form-group">
                    <label>اسم الشريك *</label>
                    <input type="text" id="sponsorName" required />
                </div>
                <div class="form-group">
                    <label>الوصف</label>
                    <textarea id="sponsorDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>رابط الشعار *</label>
                    <input type="url" id="sponsorLogo" required placeholder="https://example.com/logo.png" />
                </div>
                <div class="form-group">
                    <label>رابط الموقع</label>
                    <input type="url" id="sponsorLink" placeholder="https://example.com" />
                </div>
                <div class="form-group">
                    <label>الشارة</label>
                    <select id="sponsorBadge">
                        <option value="">بدون شارة</option>
                        <option value="ذهبي">ذهبي</option>
                        <option value="فضي">فضي</option>
                        <option value="برونزي">برونزي</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>الترتيب</label>
                    <input type="number" id="sponsorOrder" min="0" placeholder="0" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline" id="cancelSponsorBtn">إلغاء</button>
                    <button type="submit" class="btn-primary">
                        <i class="fa-solid fa-save"></i>
                        حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة إضافة/تعديل سؤال شائع -->
    <div class="modal" id="faqModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="faqModalTitle">إضافة سؤال شائع</h2>
                <button class="btn-icon" id="closeFaqModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <form id="faqForm" class="modal-body">
                <div class="form-group">
                    <label>السؤال *</label>
                    <input type="text" id="faqQuestion" required />
                </div>
                <div class="form-group">
                    <label>الإجابة *</label>
                    <textarea id="faqAnswer" rows="5" required></textarea>
                </div>
                <div class="form-group">
                    <label>الترتيب</label>
                    <input type="number" id="faqOrder" min="0" placeholder="0" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-outline" id="cancelFaqBtn">إلغاء</button>
                    <button type="submit" class="btn-primary">
                        <i class="fa-solid fa-save"></i>
                        حفظ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- نافذة عرض تفاصيل طلب العضوية -->
    <div class="modal" id="applicationDetailModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>
                    <i class="fa-solid fa-user-circle"></i>
                    تفاصيل طلب العضوية
                </h2>
                <button class="btn-icon" id="closeApplicationDetailModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="applicationDetailContent">
                <div class="message-detail-header"
                    style="margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #e5e7eb;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div>
                            <h3 style="margin: 0 0 0.5rem 0; color: #274060;" id="applicationDetailName"></h3>
                            <p style="margin: 0; color: #64748b;">
                                <i class="fa-solid fa-envelope"></i> <span id="applicationDetailEmail"></span>
                            </p>
                            <p style="margin: 0.25rem 0 0; color: #64748b;">
                                <i class="fa-solid fa-phone"></i> <span id="applicationDetailPhone"></span>
                            </p>
                        </div>
                        <div style="text-align: left;">
                            <span class="badge" id="applicationDetailStatus"></span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: #64748b; flex-wrap: wrap;">
                        <span><i class="fa-solid fa-calendar"></i> <span id="applicationDetailDate"></span></span>
                        <span><i class="fa-solid fa-graduation-cap"></i> <span
                                id="applicationDetailDegree"></span></span>
                        <span><i class="fa-solid fa-users"></i> <span id="applicationDetailCommittee"></span></span>
                    </div>
                </div>

                <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                    <div class="form-group">
                        <label style="font-weight: bold; color: #274060;">الكلية:</label>
                        <div style="background: #f8fafc; padding: 0.75rem; border-radius: 6px;"
                            id="applicationDetailCollege"></div>
                    </div>
                    <div class="form-group">
                        <label style="font-weight: bold; color: #274060;">التخصص:</label>
                        <div style="background: #f8fafc; padding: 0.75rem; border-radius: 6px;"
                            id="applicationDetailMajor"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label style="font-weight: bold; color: #274060;">المهارات:</label>
                    <div style="background: #f8fafc; padding: 0.75rem; border-radius: 6px;"
                        id="applicationDetailSkills"></div>
                </div>

                <div class="form-group">
                    <label style="font-weight: bold; color: #274060;">نبذة عن المتقدم:</label>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 8px; border-right: 4px solid #3b82f6; white-space: pre-wrap;"
                        id="applicationDetailAbout"></div>
                </div>

                <div class="form-group" id="applicationPortfolioSection" style="display: none;">
                    <label style="font-weight: bold; color: #274060;">رابط الأعمال:</label>
                    <a id="applicationDetailPortfolio" href="#" target="_blank" rel="noopener"
                        style="color: #3b82f6; text-decoration: none;">
                        <i class="fa-solid fa-external-link"></i> فتح الرابط
                    </a>
                </div>

                <div class="form-group" id="applicationSocialSection" style="display: none;">
                    <label style="font-weight: bold; color: #274060;">حسابات التواصل:</label>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;" id="applicationDetailSocial"></div>
                </div>

                <div class="form-group">
                    <label>تغيير حالة الطلب:</label>
                    <select id="applicationDetailStatusSelect" class="filter-select">
                        <option value="new">جديد</option>
                        <option value="under_review">قيد المراجعة</option>
                        <option value="accepted">مقبول</option>
                        <option value="rejected">مرفوض</option>
                        <option value="archived">مؤرشف</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ملاحظات الإدارة:</label>
                    <textarea id="applicationAdminNotes" rows="4" placeholder="أضف ملاحظات حول هذا الطلب..."></textarea>
                </div>

                <div class="form-group" id="applicationReviewSection" style="display: none;">
                    <label style="font-weight: bold; color: #6b7280;">معلومات المراجعة:</label>
                    <div
                        style="background: #f9fafb; padding: 1rem; border-radius: 8px; font-size: 0.875rem; color: #64748b;">
                        <p style="margin: 0;">
                            <i class="fa-solid fa-user"></i> تمت المراجعة بواسطة: <span
                                id="applicationReviewedBy"></span>
                        </p>
                        <p style="margin: 0.5rem 0 0;">
                            <i class="fa-solid fa-clock"></i> تاريخ المراجعة: <span id="applicationReviewedAt"></span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-outline" id="deleteApplicationBtn">
                    <i class="fa-solid fa-trash"></i>
                    حذف
                </button>
                <button type="button" class="btn-outline" id="closeApplicationDetailBtn">إغلاق</button>
                <button type="button" class="btn-primary" id="saveApplicationBtn">
                    <i class="fa-solid fa-save"></i>
                    حفظ التغييرات
                </button>
            </div>
        </div>
    </div>

    <!-- نافذة عرض تفاصيل رسالة التواصل -->
    <div class="modal" id="messageDetailModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>
                    <i class="fa-solid fa-envelope-open"></i>
                    تفاصيل الرسالة
                </h2>
                <button class="btn-icon" id="closeMessageDetailModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="messageDetailContent">
                <div class="message-detail-header"
                    style="margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid #e5e7eb;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div>
                            <h3 style="margin: 0 0 0.5rem 0; color: #274060;" id="messageDetailName"></h3>
                            <p style="margin: 0; color: #64748b;" id="messageDetailEmail"></p>
                        </div>
                        <div style="text-align: left;">
                            <span class="badge" id="messageDetailStatus"></span>
                            <span class="badge" id="messageDetailPriority" style="margin-right: 0.5rem;"></span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; font-size: 0.875rem; color: #64748b;">
                        <span><i class="fa-solid fa-calendar"></i> <span id="messageDetailDate"></span></span>
                        <span><i class="fa-solid fa-tag"></i> <span id="messageDetailSubject"></span></span>
                    </div>
                </div>

                <div class="form-group">
                    <label style="font-weight: bold; color: #274060;">الرسالة:</label>
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 8px; border-right: 4px solid #3b82f6;"
                        id="messageDetailMessage"></div>
                </div>

                <div class="form-group" id="messageReplySection" style="display: none;">
                    <label style="font-weight: bold; color: #10b981;">الرد:</label>
                    <div
                        style="background: #f0fdf4; padding: 1rem; border-radius: 8px; border-right: 4px solid #10b981;">
                        <p id="messageDetailReply" style="margin: 0;"></p>
                        <small style="color: #64748b; margin-top: 0.5rem; display: block;">
                            <i class="fa-solid fa-user"></i> <span id="messageDetailRepliedBy"></span> •
                            <i class="fa-solid fa-clock"></i> <span id="messageDetailRepliedAt"></span>
                        </small>
                    </div>
                </div>

                <div class="form-group" id="messageNotesSection" style="display: none;">
                    <label style="font-weight: bold; color: #6b7280;">ملاحظات داخلية:</label>
                    <div style="background: #f9fafb; padding: 1rem; border-radius: 8px;" id="messageDetailNotes"></div>
                </div>

                <div class="form-group">
                    <label>تغيير الحالة:</label>
                    <select id="messageDetailStatusSelect" class="filter-select">
                        <option value="new">جديدة</option>
                        <option value="read">مقروءة</option>
                        <option value="replied">تم الرد</option>
                        <option value="archived">مؤرشفة</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>الأولوية:</label>
                    <select id="messageDetailPrioritySelect" class="filter-select">
                        <option value="low">منخفض</option>
                        <option value="normal">عادي</option>
                        <option value="high">عالي</option>
                        <option value="urgent">عاجل</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>إضافة رد:</label>
                    <textarea id="messageReplyInput" rows="4" placeholder="اكتب ردك هنا..."></textarea>
                </div>

                <div class="form-group">
                    <label>ملاحظات داخلية:</label>
                    <textarea id="messageNotesInput" rows="3" placeholder="ملاحظات للاستخدام الداخلي فقط..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-outline" id="deleteMessageBtn">
                    <i class="fa-solid fa-trash"></i>
                    حذف
                </button>
                <button type="button" class="btn-outline" id="closeMessageDetailBtn">إغلاق</button>
                <button type="button" class="btn-primary" id="saveMessageBtn">
                    <i class="fa-solid fa-save"></i>
                    حفظ التغييرات
                </button>
            </div>
        </div>
    </div>

    <!-- نافذة منبثقة احترافية لتفاصيل الطلب -->
    <div id="applicationDetailsModal" class="custom-modal">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-container">
            <div class="custom-modal-header">
                <h2 class="custom-modal-title">
                    <i class="fa-solid fa-file-lines"></i>
                    تفاصيل الطلب
                </h2>
                <button class="custom-modal-close" onclick="window.closeApplicationModal()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="custom-modal-body" id="applicationDetailsContent">
                <!-- سيتم ملء المحتوى ديناميكياً -->
            </div>

            <div class="custom-modal-footer" id="applicationDetailsActions">
                <!-- سيتم ملء الأزرار ديناميكياً -->
            </div>
        </div>
    </div>

    <!-- نافذة منبثقة للنماذج (إنشاء/تعديل) -->
    <div id="formModal" class="custom-modal">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-container" style="max-width: 650px;">
            <div class="custom-modal-header">
                <h2 class="custom-modal-title" id="formModalTitle">
                    <i class="fa-solid fa-edit"></i>
                    نموذج
                </h2>
                <button class="custom-modal-close" onclick="window.closeFormModal()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="custom-modal-body" id="formModalContent">
                <!-- سيتم ملء النموذج ديناميكياً -->
            </div>

            <div class="custom-modal-footer" id="formModalActions">
                <!-- سيتم ملء الأزرار ديناميكياً -->
            </div>
        </div>
    </div>

    <!-- نافذة تأكيد -->
    <div id="confirmModal" class="custom-modal">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-container" style="max-width: 450px;">
            <div class="custom-modal-header">
                <h2 class="custom-modal-title" id="confirmModalTitle">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    تأكيد
                </h2>
                <button class="custom-modal-close" onclick="window.closeConfirmModal()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="custom-modal-body" id="confirmModalContent" style="text-align: center; padding: 2rem;">
                <!-- سيتم ملء المحتوى ديناميكياً -->
            </div>

            <div class="custom-modal-footer" id="confirmModalActions" style="justify-content: center;">
                <!-- سيتم ملء الأزرار ديناميكياً -->
            </div>
        </div>
    </div>

    <!-- نافذة تعديل البيانات الشخصية -->
    <div class="modal" id="editProfileModal" style="display: none;">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>
                    <i class="fa-solid fa-user-pen"></i>
                    تعديل البيانات الشخصية
                </h2>
                <button class="btn-icon" id="closeEditProfileModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm">
                    <!-- البيانات الأساسية -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin: 0 0 1rem 0; color: #274060; font-size: 1.1rem; border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem;">
                            <i class="fa-solid fa-user"></i>
                            البيانات الأساسية
                        </h3>
                        <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                            <div class="form-group">
                                <label>الاسم الثلاثي <span style="color: #ef4444;">*</span></label>
                                <input type="text" id="editFullName" required placeholder="الاسم الثلاثي الكامل">
                                <small id="nameChangeWarning" style="color: #f59e0b; display: none;">
                                    <i class="fa-solid fa-exclamation-triangle"></i>
                                    يمكن تغيير الاسم مرة واحدة كل 30 يومًا
                                </small>
                            </div>
                            <div class="form-group">
                                <label>البريد الإلكتروني <span style="color: #ef4444;">*</span></label>
                                <input type="email" id="editEmail" required placeholder="name@example.com">
                            </div>
                            <div class="form-group">
                                <label>رقم الجوال <span style="color: #ef4444;">*</span></label>
                                <input type="tel" id="editPhone" required placeholder="05XXXXXXXX" pattern="^05[0-9]{8}$" maxlength="10">
                            </div>
                        </div>
                    </div>

                    <!-- البيانات الشخصية -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin: 0 0 1rem 0; color: #274060; font-size: 1.1rem; border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem;">
                            <i class="fa-solid fa-id-card"></i>
                            البيانات الشخصية
                        </h3>
                        <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                            <div class="form-group">
                                <label>رقم الهوية الوطنية <span style="color: #ef4444;">*</span></label>
                                <input type="text" id="editNationalId" required placeholder="1XXXXXXXXX" pattern="^[12][0-9]{9}$" maxlength="10">
                            </div>
                            <div class="form-group">
                                <label>تاريخ الميلاد <span style="color: #ef4444;">*</span></label>
                                <input type="date" id="editBirthDate" required>
                            </div>
                            <div class="form-group">
                                <label>الرقم الأكاديمي <span style="color: #ef4444;">*</span></label>
                                <input type="text" id="editAcademicRecord" required placeholder="4XXXXXXXX">
                            </div>
                        </div>
                    </div>

                    <!-- البيانات الأكاديمية -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin: 0 0 1rem 0; color: #274060; font-size: 1.1rem; border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem;">
                            <i class="fa-solid fa-graduation-cap"></i>
                            البيانات الأكاديمية
                        </h3>
                        <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                            <div class="form-group">
                                <label>الدرجة الأكاديمية <span style="color: #ef4444;">*</span></label>
                                <select id="editAcademicDegree" required>
                                    <option value="">اختر الدرجة</option>
                                    <option value="high_school">ثانوية عامة</option>
                                    <option value="diploma">دبلوم</option>
                                    <option value="bachelor">بكالوريوس</option>
                                    <option value="master">ماجستير</option>
                                    <option value="phd">دكتوراه</option>
                                    <option value="other">أخرى</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>الكلية</label>
                                <input type="text" id="editCollege" placeholder="اسم الكلية">
                            </div>
                            <div class="form-group">
                                <label>التخصص</label>
                                <input type="text" id="editMajor" placeholder="التخصص الدراسي">
                            </div>
                        </div>
                    </div>

                    <!-- حسابات التواصل الاجتماعي -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin: 0 0 1rem 0; color: #274060; font-size: 1.1rem; border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem;">
                            <i class="fa-solid fa-share-nodes"></i>
                            حسابات التواصل الاجتماعي
                        </h3>
                        <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                            <div class="form-group">
                                <label><i class="fa-brands fa-twitter"></i> تويتر</label>
                                <input type="text" id="editTwitter" placeholder="@username">
                            </div>
                            <div class="form-group">
                                <label><i class="fa-brands fa-instagram"></i> إنستقرام</label>
                                <input type="text" id="editInstagram" placeholder="@username">
                            </div>
                            <div class="form-group">
                                <label><i class="fa-brands fa-tiktok"></i> تيك توك</label>
                                <input type="text" id="editTiktok" placeholder="@username">
                            </div>
                            <div class="form-group">
                                <label><i class="fa-brands fa-linkedin"></i> لينكد إن</label>
                                <input type="text" id="editLinkedin" placeholder="username">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-outline" id="cancelEditProfile">إلغاء</button>
                <button type="button" class="btn-primary" id="saveProfileChanges">
                    <i class="fa-solid fa-save"></i>
                    حفظ التغييرات
                </button>
            </div>
        </div>
    </div>

    <!-- نافذة تغيير كلمة المرور -->
    <div class="modal" id="changePasswordModal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>
                    <i class="fa-solid fa-key"></i>
                    تغيير كلمة المرور
                </h2>
                <button class="btn-icon" id="closeChangePasswordModal">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm">
                    <div class="form-group">
                        <label>كلمة المرور الحالية <span style="color: #ef4444;">*</span></label>
                        <input type="password" id="currentPassword" required placeholder="أدخل كلمة المرور الحالية">
                    </div>
                    <div class="form-group">
                        <label>كلمة المرور الجديدة <span style="color: #ef4444;">*</span></label>
                        <input type="password" id="newPassword" required placeholder="أدخل كلمة المرور الجديدة" minlength="8">
                        <small style="color: #64748b;">يجب أن تكون 8 أحرف على الأقل</small>
                    </div>
                    <div class="form-group">
                        <label>تأكيد كلمة المرور الجديدة <span style="color: #ef4444;">*</span></label>
                        <input type="password" id="confirmNewPassword" required placeholder="أعد إدخال كلمة المرور الجديدة">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-outline" id="cancelChangePassword">إلغاء</button>
                <button type="button" class="btn-primary" id="saveNewPassword">
                    <i class="fa-solid fa-save"></i>
                    تغيير كلمة المرور
                </button>
            </div>
        </div>
    </div>

    <!-- نافذة تأكيد -->
    <div id="confirmModal" class="custom-modal">
        <div class="custom-modal-overlay"></div>
        <div class="custom-modal-container" style="max-width: 450px;">
            <div class="custom-modal-header">
                <h2 class="custom-modal-title" id="confirmModalTitle">
                    <i class="fa-solid fa-triangle-exclamation"></i>
                    تأكيد
                </h2>
                <button class="custom-modal-close" onclick="window.closeConfirmModal()">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div class="custom-modal-body" id="confirmModalContent" style="text-align: center; padding: 2rem;">
                <!-- سيتم ملء المحتوى ديناميكياً -->
            </div>

            <div class="custom-modal-footer" id="confirmModalActions" style="justify-content: center;">
                <!-- سيتم ملء الأزرار ديناميكياً -->
            </div>
        </div>
    </div>

    <!-- المكتبات -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../supabase-config.js"></script>
    <script src="auth-manager.js"></script>
    <script src="js/permissions-manager.js"></script>
    <script src="js/contact-messages-manager.js"></script>
    <script src="js/newsletter-manager.js"></script>
    <script src="js/membership-manager.js"></script>
    <script src="js/membership-decisions.js"></script>
    <script src="js/membership-invitations.js"></script>
    <script src="js/interview-sessions-manager.js"></script>
    <script src="js/site-visits-manager.js"></script>
    <script src="js/surveys-manager.js"></script>
    <script src="js/surveys-results-enhanced.js"></script>
    <script src="js/membership-archives.js"></script>
    <script src="js/member-migration.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/pwa-manager.js"></script>
    <script src="js/notifications-manager.js"></script>
    <script src="js/send-notifications.js"></script>
    <script src="dashboard.js"></script>
    <!-- <link rel="stylesheet" href="css/archives.css"> -->
</body>

</html>